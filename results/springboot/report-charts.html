<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spring Boot 벤치마크 리포트</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --graviton: #10b981;
            --intel: #3b82f6;
            --amd: #ef4444;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
            --muted: #64748b;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, #059669 0%, #10b981 50%, #3b82f6 100%);
            color: white;
            border-radius: 1rem;
        }

        header h1 { font-size: 2.5rem; margin-bottom: 0.5rem; }
        header p { opacity: 0.9; font-size: 1.1rem; }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .card {
            background: var(--card);
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }

        .card h3 {
            color: var(--muted);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }

        .card .value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--intel);
        }

        .card .label { font-size: 0.875rem; color: var(--muted); }
        .card.graviton .value { color: var(--graviton); }
        .card.intel .value { color: var(--intel); }

        .chart-section {
            background: var(--card);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }

        .chart-section h2 {
            font-size: 1.25rem;
            margin-bottom: 0.25rem;
        }

        .chart-section .description {
            color: var(--muted);
            margin-bottom: 1rem;
            font-size: 0.875rem;
        }

        .chart-container { position: relative; height: 400px; }
        .chart-container.tall { height: 500px; }
        .chart-container.extra-tall { height: 800px; }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }

        .legend-custom {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
        }

        .legend-color {
            width: 14px;
            height: 14px;
            border-radius: 3px;
        }

        .insights {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 4px solid #f59e0b;
            padding: 1rem;
            border-radius: 0 0.5rem 0.5rem 0;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        .insights h4 { color: #92400e; margin-bottom: 0.5rem; }
        .insights ul { margin-left: 1.5rem; color: #78350f; }

        .insights-green {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            border-left: 4px solid #10b981;
            padding: 1rem;
            border-radius: 0 0.5rem 0.5rem 0;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        .insights-green h4 { color: #065f46; margin-bottom: 0.5rem; }
        .insights-green ul { margin-left: 1.5rem; color: #047857; }

        .analysis-box {
            background: #f1f5f9;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
        }

        .analysis-box h4 { margin-bottom: 0.5rem; color: var(--text); }

        table { width: 100%; border-collapse: collapse; margin-top: 1rem; font-size: 0.875rem; }
        th, td { padding: 0.5rem 0.75rem; text-align: left; border-bottom: 1px solid #e2e8f0; }
        th { background: #f1f5f9; font-weight: 600; }
        tr:hover { background: #f8fafc; }

        .badge {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            border-radius: 9999px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .badge-graviton { background: #d1fae5; color: #065f46; }
        .badge-intel { background: #dbeafe; color: #1e40af; }
        .badge-amd { background: #fee2e2; color: #991b1b; }

        footer {
            text-align: center;
            padding: 2rem;
            color: var(--muted);
            font-size: 0.875rem;
        }

        @media (max-width: 1200px) {
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
        }

        @media (max-width: 768px) {
            .container { padding: 1rem; }
            header h1 { font-size: 1.5rem; }
            .chart-container { height: 300px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Spring Boot 벤치마크</h1>
            <p>AWS EC2 인스턴스 51종 성능 비교 분석 (5세대 ~ 8세대)</p>
            <p style="opacity: 0.7; margin-top: 0.5rem;">2026년 1월 | 서울 리전 (ap-northeast-2) | 테스트 환경: EKS + Karpenter</p>
        </header>

        <!-- 주요 요약 카드 -->
        <div class="summary-cards">
            <div class="card intel">
                <h3>최고 처리량</h3>
                <div class="value">m7i-flex.xlarge</div>
                <div class="label">98,864 req/s</div>
            </div>
            <div class="card graviton">
                <h3>최고 Cold Start</h3>
                <div class="value">r8g.xlarge</div>
                <div class="label">1,527ms JVM Startup</div>
            </div>
            <div class="card intel">
                <h3>최저 지연</h3>
                <div class="value">r8i-flex.xlarge</div>
                <div class="label">2.05ms Latency</div>
            </div>
            <div class="card intel">
                <h3>최고 가성비</h3>
                <div class="value">m7i-flex.xlarge</div>
                <div class="label">효율성 421점</div>
            </div>
            <div class="card">
                <h3>세대별 개선</h3>
                <div class="value" style="color: #6366f1;">2-3x</div>
                <div class="label">5세대 -> 8세대</div>
            </div>
        </div>

        <!-- 목차 -->
        <div class="chart-section" style="padding: 1rem 1.5rem;">
            <h2>목차</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; margin-top: 0.75rem;">
                <a href="#methodology" style="color: var(--intel); text-decoration: none;">1. 테스트 방법론</a>
                <a href="#throughput" style="color: var(--intel); text-decoration: none;">2. 처리량 분석</a>
                <a href="#coldstart" style="color: var(--intel); text-decoration: none;">3. JVM Cold Start 분석</a>
                <a href="#generation" style="color: var(--intel); text-decoration: none;">4. 세대별 비교</a>
                <a href="#cost" style="color: var(--intel); text-decoration: none;">5. 가성비 분석</a>
                <a href="#full-results" style="color: var(--intel); text-decoration: none;">6. 전체 결과</a>
                <a href="#conclusion" style="color: var(--intel); text-decoration: none;">7. 결론</a>
            </div>
        </div>

        <!-- 테스트 방법론 -->
        <div class="chart-section" id="methodology">
            <h2>1. 테스트 방법론</h2>
            <p class="description">Spring Boot 애플리케이션의 처리량과 Cold Start 성능 측정</p>

            <div class="grid-2" style="margin-top: 1rem;">
                <div>
                    <h4 style="margin-bottom: 0.75rem;">측정 메트릭</h4>
                    <table>
                        <tr><th>메트릭</th><th>설명</th><th>방향</th></tr>
                        <tr><td>Requests/sec</td><td>HTTP 요청 처리량</td><td>높을수록 좋음</td></tr>
                        <tr><td>Latency</td><td>평균 응답 지연</td><td>낮을수록 좋음</td></tr>
                        <tr><td>JVM Startup</td><td>JVM 부팅 시간</td><td>낮을수록 좋음</td></tr>
                        <tr><td>Cold Start to HTTP</td><td>Pod 시작~HTTP 준비</td><td>낮을수록 좋음</td></tr>
                    </table>
                </div>
                <div>
                    <h4 style="margin-bottom: 0.75rem;">테스트 환경</h4>
                    <table>
                        <tr><td>플랫폼</td><td><strong>Amazon EKS 1.31</strong></td></tr>
                        <tr><td>리전</td><td>ap-northeast-2 (서울)</td></tr>
                        <tr><td>인스턴스 크기</td><td>xlarge (4 vCPU)</td></tr>
                        <tr><td>테스트 수</td><td>51개 인스턴스 타입</td></tr>
                    </table>
                </div>
            </div>

            <div class="insights" style="margin-top: 1rem;">
                <h4>핵심 인사이트</h4>
                <ul>
                    <li><strong>Intel 7-8세대</strong>가 처리량(req/s)에서 우위</li>
                    <li><strong>Graviton 8세대</strong>가 JVM Cold Start에서 최고 성능</li>
                    <li>Serverless/FaaS 환경에서는 Graviton 8세대 추천</li>
                </ul>
            </div>
        </div>

        <!-- 처리량 분석 -->
        <div id="throughput"></div>

        <!-- 차트 1: Top 20 Requests/sec -->
        <div class="chart-section">
            <h2>2. Top 20 Requests/sec (처리량)</h2>
            <p class="description">높을수록 좋음 | 초록: Graviton, 파랑: Intel, 빨강: AMD</p>
            <div class="chart-container tall">
                <canvas id="top20ThroughputChart"></canvas>
            </div>
            <div class="legend-custom">
                <div class="legend-item"><div class="legend-color" style="background: #10b981;"></div><span>Graviton (arm64)</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #3b82f6;"></div><span>Intel (x86_64)</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #ef4444;"></div><span>AMD (x86_64)</span></div>
            </div>
            <div class="insights" style="margin-top: 1rem;">
                <h4>분석</h4>
                <ul>
                    <li><strong>m7i-flex.xlarge</strong>가 98,864 req/s로 1위 (Intel 7세대 flex)</li>
                    <li>Top 10 중 대부분이 Intel 7-8세대 - <strong>Intel이 처리량 우위</strong></li>
                    <li>Graviton 최고 성능은 <strong>m8g.xlarge</strong> (74,131 req/s, 7위)</li>
                </ul>
            </div>
        </div>

        <div class="grid-2">
            <!-- 차트 2: Top 20 Latency -->
            <div class="chart-section">
                <h2>Top 20 Latency (응답 지연)</h2>
                <p class="description">낮을수록 좋음 (ms)</p>
                <div class="chart-container">
                    <canvas id="top20LatencyChart"></canvas>
                </div>
            </div>

            <!-- 차트 3: Intel vs Graviton 8세대 비교 -->
            <div class="chart-section">
                <h2>8세대 비교: Intel vs Graviton</h2>
                <p class="description">Intel 8세대와 Graviton 8세대 직접 비교</p>
                <div class="chart-container">
                    <canvas id="gen8CompareChart"></canvas>
                </div>
            </div>
        </div>

        <!-- JVM Cold Start 분석 -->
        <div id="coldstart"></div>

        <!-- 차트 4: Top 20 JVM Startup -->
        <div class="chart-section">
            <h2>3. Top 20 JVM Startup Time (Cold Start)</h2>
            <p class="description">낮을수록 좋음 | Serverless/FaaS 환경에서 중요</p>
            <div class="chart-container tall">
                <canvas id="top20JvmStartupChart"></canvas>
            </div>
            <div class="legend-custom">
                <div class="legend-item"><div class="legend-color" style="background: #10b981;"></div><span>Graviton (arm64)</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #3b82f6;"></div><span>Intel (x86_64)</span></div>
            </div>
            <div class="insights-green" style="margin-top: 1rem;">
                <h4>Graviton 8세대의 JVM Cold Start 우위</h4>
                <ul>
                    <li><strong>r8g.xlarge</strong>: 1,527ms - 전체 최고 JVM Cold Start</li>
                    <li><strong>c8g.xlarge</strong>: 1,888ms - 가성비 최고</li>
                    <li><strong>m8g.xlarge</strong>: 2,051ms - 균형 잡힌 선택</li>
                    <li>8세대에서 Graviton이 Intel 대비 <strong>빠른 JVM 시작</strong></li>
                </ul>
            </div>
        </div>

        <!-- 왜 Graviton 8세대가 JVM Cold Start가 빠른가? -->
        <div class="chart-section">
            <h2>왜 Graviton 8세대가 JVM Cold Start가 빠른가?</h2>
            <p class="description">아키텍처 특성 분석</p>
            <div class="grid-2" style="gap: 1rem;">
                <div class="chart-container" style="height: 300px;">
                    <canvas id="jvmArchCompareChart"></canvas>
                </div>
                <div class="analysis-box" style="margin-top: 0;">
                    <h4>아키텍처 특성 비교</h4>
                    <table>
                        <tr><th>항목</th><th>Intel 8세대</th><th>Graviton 8세대</th></tr>
                        <tr><td>코어</td><td>Sapphire Rapids</td><td>Neoverse V2</td></tr>
                        <tr><td>메모리 대역폭</td><td>높음</td><td><strong>매우 높음</strong></td></tr>
                        <tr><td>캐시 지연</td><td>보통</td><td><strong>낮음</strong></td></tr>
                        <tr><td>분기 예측</td><td>우수</td><td><strong>매우 우수</strong></td></tr>
                        <tr><td>평균 JVM Startup</td><td>2,131ms</td><td><strong>1,822ms</strong></td></tr>
                    </table>
                    <div class="insights-green" style="margin-top: 1rem;">
                        <h4>Serverless/FaaS 추천</h4>
                        <ul>
                            <li>AWS Lambda: <strong>Graviton (arm64)</strong></li>
                            <li>Fargate: <strong>Graviton</strong> - 비용 + Cold Start</li>
                            <li>EKS Spot: <strong>r8g/c8g</strong> - 빠른 복구</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- 세대별 비교 -->
        <div id="generation"></div>

        <!-- 차트 5: 세대별 처리량 비교 -->
        <div class="chart-section">
            <h2>4. 세대별 처리량 비교 (Intel/AMD vs Graviton)</h2>
            <p class="description">각 세대별 아키텍처 평균 Requests/sec</p>
            <div class="chart-container">
                <canvas id="genThroughputChart"></canvas>
            </div>
            <div class="insights">
                <h4>핵심 인사이트</h4>
                <ul>
                    <li>모든 세대에서 <strong>Intel이 Graviton보다 처리량 우위</strong></li>
                    <li>8세대: Intel 84,179 req/s vs Graviton 69,495 req/s (+21%)</li>
                    <li>세대가 올라갈수록 성능 차이 유지</li>
                </ul>
            </div>
        </div>

        <!-- 차트 6: 세대별 JVM Startup 비교 -->
        <div class="chart-section">
            <h2>세대별 JVM Startup 비교 (Intel/AMD vs Graviton)</h2>
            <p class="description">각 세대별 아키텍처 평균 JVM Startup Time</p>
            <div class="chart-container">
                <canvas id="genJvmStartupChart"></canvas>
            </div>
            <div class="insights-green">
                <h4>핵심 인사이트</h4>
                <ul>
                    <li>8세대: <strong>Graviton이 Intel보다 빠름</strong> (1,822ms vs 2,131ms)</li>
                    <li>Graviton의 세대별 개선폭이 Intel보다 큼</li>
                    <li>Serverless 환경에서 Graviton 8세대 추천</li>
                </ul>
            </div>
        </div>

        <div class="grid-2">
            <!-- 차트 7: 세대별 처리량 (아키텍처 분리) -->
            <div class="chart-section">
                <h2>세대별 처리량 (Intel/Graviton/AMD)</h2>
                <p class="description">아키텍처별 분리 비교</p>
                <div class="chart-container">
                    <canvas id="genArchThroughputChart"></canvas>
                </div>
            </div>

            <!-- 차트 8: 세대별 JVM Startup (아키텍처 분리) -->
            <div class="chart-section">
                <h2>세대별 JVM Startup (Intel/Graviton/AMD)</h2>
                <p class="description">아키텍처별 분리 비교</p>
                <div class="chart-container">
                    <canvas id="genArchJvmChart"></canvas>
                </div>
            </div>
        </div>

        <!-- 패밀리별 비교 -->
        <div class="chart-section">
            <h2>패밀리별 성능 비교 (C/M/R)</h2>
            <p class="description">C(컴퓨팅), M(범용), R(메모리) 패밀리 비교</p>
            <div class="chart-container">
                <canvas id="familyChart"></canvas>
            </div>
            <div class="analysis-box">
                <h4>패밀리 선택 가이드</h4>
                <table>
                    <tr><th>패밀리</th><th>Intel Req/s</th><th>Graviton Req/s</th><th>승자</th><th>추천 용도</th></tr>
                    <tr><td>C (컴퓨팅)</td><td>54,489</td><td>43,093</td><td><span class="badge badge-intel">Intel</span></td><td>고처리량 API</td></tr>
                    <tr><td>M (범용)</td><td>51,118</td><td>44,588</td><td><span class="badge badge-intel">Intel</span></td><td>균형 워크로드</td></tr>
                    <tr><td>R (메모리)</td><td>50,501</td><td>48,979</td><td><span class="badge badge-intel">Intel</span></td><td>대용량 힙</td></tr>
                </table>
            </div>
        </div>

        <!-- 가성비 분석 -->
        <div id="cost"></div>

        <!-- 차트 9: 가격 대비 성능 버블 차트 -->
        <div class="chart-section">
            <h2>5. 가격 대비 성능 분석</h2>
            <p class="description">X축: 시간당 비용($), Y축: Requests/sec | 우측 상단이 최적</p>
            <div class="chart-container tall">
                <canvas id="pricePerformanceChart"></canvas>
            </div>
            <div class="legend-custom">
                <div class="legend-item"><div class="legend-color" style="background: rgba(16, 185, 129, 0.7);"></div><span>Graviton</span></div>
                <div class="legend-item"><div class="legend-color" style="background: rgba(59, 130, 246, 0.7);"></div><span>Intel</span></div>
                <div class="legend-item"><div class="legend-color" style="background: rgba(239, 68, 68, 0.7);"></div><span>AMD</span></div>
            </div>
        </div>

        <!-- 차트 10: 가성비 Top 15 -->
        <div class="chart-section">
            <h2>가성비 Top 15 (효율성 점수)</h2>
            <p class="description">효율성 = Requests/sec / ($/hr x 1000) | 높을수록 좋음</p>
            <div class="chart-container">
                <canvas id="costEfficiencyChart"></canvas>
            </div>
        </div>

        <!-- 피해야 할 인스턴스 -->
        <div class="chart-section">
            <h2>피해야 할 인스턴스</h2>
            <p class="description">성능 대비 비용 효율이 낮은 인스턴스</p>
            <div class="chart-container" style="height: 300px;">
                <canvas id="avoidChart"></canvas>
            </div>
            <table style="margin-top: 1rem;">
                <tr><th>인스턴스</th><th>Req/s</th><th>JVM Startup</th><th>문제점</th><th>대안</th></tr>
                <tr><td><span class="badge badge-intel">m5d.xlarge</span></td><td>15,973</td><td>3,298ms</td><td>5세대 최저 성능</td><td>m8i.xlarge</td></tr>
                <tr><td><span class="badge badge-amd">m5a.xlarge</span></td><td>22,616</td><td>4,686ms</td><td>AMD 구형</td><td>m8g.xlarge</td></tr>
                <tr><td><span class="badge badge-amd">r5a.xlarge</span></td><td>22,845</td><td>4,175ms</td><td>AMD 구형</td><td>r8g.xlarge</td></tr>
                <tr><td><span class="badge badge-amd">m5ad.xlarge</span></td><td>22,924</td><td>4,305ms</td><td>AMD 구형</td><td>m8g.xlarge</td></tr>
                <tr><td><span class="badge badge-amd">r5ad.xlarge</span></td><td>23,540</td><td>4,804ms</td><td>AMD 구형</td><td>r8g.xlarge</td></tr>
            </table>
        </div>

        <!-- 추천 테이블 -->
        <div class="chart-section">
            <h2>용도별 추천 인스턴스</h2>
            <table>
                <thead>
                    <tr><th>용도</th><th>추천 인스턴스</th><th>Req/s</th><th>JVM Startup</th><th>Latency</th><th>$/hr</th><th>선택 이유</th></tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>최고 처리량</strong></td>
                        <td><span class="badge badge-intel">m7i-flex.xlarge</span></td>
                        <td>98,864</td><td>2,706ms</td><td>2.06ms</td><td>$0.235</td>
                        <td>처리량 1위</td>
                    </tr>
                    <tr>
                        <td><strong>Serverless/Cold Start</strong></td>
                        <td><span class="badge badge-graviton">r8g.xlarge</span></td>
                        <td>65,152</td><td>1,527ms</td><td>2.88ms</td><td>$0.284</td>
                        <td>JVM Startup 최고</td>
                    </tr>
                    <tr>
                        <td><strong>최고 가성비</strong></td>
                        <td><span class="badge badge-intel">m7i-flex.xlarge</span></td>
                        <td>98,864</td><td>2,706ms</td><td>2.06ms</td><td>$0.235</td>
                        <td>효율성 점수 1위</td>
                    </tr>
                    <tr>
                        <td><strong>Graviton 최고 성능</strong></td>
                        <td><span class="badge badge-graviton">m8g.xlarge</span></td>
                        <td>74,131</td><td>2,051ms</td><td>2.69ms</td><td>$0.221</td>
                        <td>Graviton 처리량 1위</td>
                    </tr>
                    <tr>
                        <td><strong>예산 절감</strong></td>
                        <td><span class="badge badge-graviton">c6g.xlarge</span></td>
                        <td>29,313</td><td>2,978ms</td><td>6.92ms</td><td>$0.154</td>
                        <td>가장 저렴</td>
                    </tr>
                    <tr>
                        <td><strong>균형 선택</strong></td>
                        <td><span class="badge badge-graviton">c8g.xlarge</span></td>
                        <td>69,203</td><td>1,888ms</td><td>2.81ms</td><td>$0.180</td>
                        <td>성능 + 가격 균형</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- 전체 결과 테이블 -->
        <div class="chart-section" id="full-results">
            <h2>6. 전체 결과 (51개 인스턴스)</h2>
            <p class="description">모든 테스트 인스턴스의 상세 결과 | 열 헤더 클릭으로 정렬</p>

            <div style="margin-bottom: 1rem; display: flex; gap: 1rem; flex-wrap: wrap; align-items: center;">
                <input type="text" id="tableSearch" placeholder="인스턴스 검색..."
                    style="padding: 0.5rem 1rem; border: 1px solid #e2e8f0; border-radius: 0.5rem; width: 200px;">
                <select id="archFilter" style="padding: 0.5rem 1rem; border: 1px solid #e2e8f0; border-radius: 0.5rem;">
                    <option value="">모든 아키텍처</option>
                    <option value="graviton">Graviton</option>
                    <option value="intel">Intel</option>
                    <option value="amd">AMD</option>
                </select>
                <select id="genFilter" style="padding: 0.5rem 1rem; border: 1px solid #e2e8f0; border-radius: 0.5rem;">
                    <option value="">모든 세대</option>
                    <option value="8">8세대</option>
                    <option value="7">7세대</option>
                    <option value="6">6세대</option>
                    <option value="5">5세대</option>
                </select>
                <select id="familyFilter" style="padding: 0.5rem 1rem; border: 1px solid #e2e8f0; border-radius: 0.5rem;">
                    <option value="">모든 패밀리</option>
                    <option value="c">C (컴퓨팅)</option>
                    <option value="m">M (범용)</option>
                    <option value="r">R (메모리)</option>
                </select>
            </div>

            <div style="overflow-x: auto;">
                <table id="fullResultsTable">
                    <thead>
                        <tr>
                            <th data-sort="rank" style="cursor: pointer;">순위</th>
                            <th data-sort="name" style="cursor: pointer;">인스턴스</th>
                            <th data-sort="arch" style="cursor: pointer;">아키텍처</th>
                            <th data-sort="gen" style="cursor: pointer;">세대</th>
                            <th data-sort="reqPerSec" style="cursor: pointer;">Req/s</th>
                            <th data-sort="latency" style="cursor: pointer;">Latency (ms)</th>
                            <th data-sort="jvmStartup" style="cursor: pointer;">JVM Startup (ms)</th>
                            <th data-sort="price" style="cursor: pointer;">$/hr</th>
                            <th data-sort="efficiency" style="cursor: pointer;">효율성</th>
                        </tr>
                    </thead>
                    <tbody id="fullResultsBody">
                        <!-- JavaScript로 채워짐 -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- 결론 -->
        <div class="chart-section" id="conclusion">
            <h2>7. 결론</h2>
            <p class="description">핵심 시사점 및 최종 추천</p>

            <div class="grid-2" style="margin-top: 1rem; gap: 1.5rem;">
                <div>
                    <h4 style="margin-bottom: 1rem; color: var(--intel);">핵심 시사점</h4>
                    <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                        <div style="display: flex; align-items: flex-start; gap: 0.75rem;">
                            <span style="background: #3b82f6; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 0.8rem;">1</span>
                            <span><strong>처리량은 Intel m7i-flex 1위</strong> - 98,864 req/s로 최고</span>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 0.75rem;">
                            <span style="background: #10b981; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 0.8rem;">2</span>
                            <span><strong>JVM Cold Start는 Graviton r8g 최강</strong> - 1,527ms로 최고</span>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 0.75rem;">
                            <span style="background: #6366f1; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 0.8rem;">3</span>
                            <span><strong>8세대 Intel이 처리량 지배</strong> - Top 6 중 5개 Intel</span>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 0.75rem;">
                            <span style="background: #f59e0b; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 0.8rem;">4</span>
                            <span><strong>flex 인스턴스의 활약</strong> - m7i-flex가 가성비 최고</span>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 0.75rem;">
                            <span style="background: #ef4444; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 0.8rem;">5</span>
                            <span><strong>AMD EPYC 5세대 피하기</strong> - m5a/r5a 시리즈는 최하위 성능</span>
                        </div>
                    </div>
                </div>

                <div>
                    <h4 style="margin-bottom: 1rem; color: var(--graviton);">최종 추천</h4>
                    <div style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); border-radius: 1rem; padding: 1.5rem; text-align: center;">
                        <div style="font-size: 0.875rem; color: #1e40af; margin-bottom: 0.5rem;">고처리량 워크로드</div>
                        <div style="font-size: 2rem; font-weight: 700; color: #1e3a8a;">m7i-flex.xlarge</div>
                        <div style="display: flex; justify-content: center; gap: 1.5rem; margin-top: 1rem; font-size: 0.875rem; color: #1e40af;">
                            <span>98,864 req/s</span>
                            <span>$0.235/hr</span>
                            <span>효율성 1위</span>
                        </div>
                    </div>

                    <div style="background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); border-radius: 1rem; padding: 1.5rem; text-align: center; margin-top: 1rem;">
                        <div style="font-size: 0.875rem; color: #065f46; margin-bottom: 0.5rem;">Serverless / Cold Start 중요</div>
                        <div style="font-size: 2rem; font-weight: 700; color: #047857;">r8g.xlarge</div>
                        <div style="display: flex; justify-content: center; gap: 1.5rem; margin-top: 1rem; font-size: 0.875rem; color: #065f46;">
                            <span>1,527ms JVM</span>
                            <span>$0.284/hr</span>
                            <span>65K req/s</span>
                        </div>
                    </div>

                    <div style="margin-top: 1rem; display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem;">
                        <div style="background: #f3e8ff; border-radius: 0.5rem; padding: 0.75rem; text-align: center;">
                            <div style="font-size: 0.7rem; color: #6b21a8;">Graviton 최고</div>
                            <div style="font-weight: 600; color: #581c87;">m8g.xlarge</div>
                        </div>
                        <div style="background: #fef3c7; border-radius: 0.5rem; padding: 0.75rem; text-align: center;">
                            <div style="font-size: 0.7rem; color: #92400e;">예산 절감</div>
                            <div style="font-weight: 600; color: #78350f;">c6g.xlarge</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>벤치마크 자동화 시스템 | 데이터 수집: 2026년 1월 | 리전: ap-northeast-2 (서울)</p>
            <p>테스트 환경: Amazon EKS 1.31 + Karpenter (결과는 범용 EC2 환경에도 적용 가능)</p>
        </footer>
    </div>

    <script>
        // 데이터 정의 (corrected data from benchmark-data.csv)
        const allInstances = [
            { name: 'm7i-flex.xlarge', arch: 'intel', gen: 7, family: 'm', price: 0.235, reqPerSec: 98864, latency: 2.06, jvmStartup: 2706, coldStart: 30204 },
            { name: 'r8i-flex.xlarge', arch: 'intel', gen: 8, family: 'r', price: 0.318, reqPerSec: 97673, latency: 2.05, jvmStartup: 2065, coldStart: 30418 },
            { name: 'r8i.xlarge', arch: 'intel', gen: 8, family: 'r', price: 0.335, reqPerSec: 86894, latency: 2.22, jvmStartup: 2130, coldStart: 30989 },
            { name: 'c8i.xlarge', arch: 'intel', gen: 8, family: 'c', price: 0.212, reqPerSec: 83175, latency: 2.33, jvmStartup: 2081, coldStart: 30917 },
            { name: 'm8i.xlarge', arch: 'intel', gen: 8, family: 'm', price: 0.260, reqPerSec: 81969, latency: 2.38, jvmStartup: 1977, coldStart: 30862 },
            { name: 'c8i-flex.xlarge', arch: 'intel', gen: 8, family: 'c', price: 0.201, reqPerSec: 77183, latency: 2.53, jvmStartup: 2401, coldStart: 31292 },
            { name: 'm8g.xlarge', arch: 'graviton', gen: 8, family: 'm', price: 0.221, reqPerSec: 74131, latency: 2.69, jvmStartup: 2051, coldStart: 32355 },
            { name: 'c7i.xlarge', arch: 'intel', gen: 7, family: 'c', price: 0.202, reqPerSec: 74023, latency: 2.67, jvmStartup: 2972, coldStart: 0 },
            { name: 'r7i.xlarge', arch: 'intel', gen: 7, family: 'r', price: 0.319, reqPerSec: 73832, latency: 2.63, jvmStartup: 2250, coldStart: 30664 },
            { name: 'm7i.xlarge', arch: 'intel', gen: 7, family: 'm', price: 0.248, reqPerSec: 72817, latency: 2.67, jvmStartup: 2160, coldStart: 30657 },
            { name: 'c8g.xlarge', arch: 'graviton', gen: 8, family: 'c', price: 0.180, reqPerSec: 69203, latency: 2.81, jvmStartup: 1888, coldStart: 31067 },
            { name: 'r8g.xlarge', arch: 'graviton', gen: 8, family: 'r', price: 0.284, reqPerSec: 65152, latency: 2.88, jvmStartup: 1527, coldStart: 30688 },
            { name: 'c7i-flex.xlarge', arch: 'intel', gen: 7, family: 'c', price: 0.192, reqPerSec: 63231, latency: 3.20, jvmStartup: 1945, coldStart: 30602 },
            { name: 'c6in.xlarge', arch: 'intel', gen: 6, family: 'c', price: 0.256, reqPerSec: 52167, latency: 3.77, jvmStartup: 3304, coldStart: 30506 },
            { name: 'm6idn.xlarge', arch: 'intel', gen: 6, family: 'm', price: 0.386, reqPerSec: 50914, latency: 3.88, jvmStartup: 2847, coldStart: 30868 },
            { name: 'c6id.xlarge', arch: 'intel', gen: 6, family: 'c', price: 0.231, reqPerSec: 50803, latency: 3.85, jvmStartup: 2721, coldStart: 30833 },
            { name: 'r7g.xlarge', arch: 'graviton', gen: 7, family: 'r', price: 0.258, reqPerSec: 50308, latency: 3.96, jvmStartup: 2113, coldStart: 30632 },
            { name: 'r6i.xlarge', arch: 'intel', gen: 6, family: 'r', price: 0.304, reqPerSec: 50206, latency: 3.92, jvmStartup: 2743, coldStart: 30580 },
            { name: 'm6id.xlarge', arch: 'intel', gen: 6, family: 'm', price: 0.292, reqPerSec: 50196, latency: 3.92, jvmStartup: 2620, coldStart: 29155 },
            { name: 'c6i.xlarge', arch: 'intel', gen: 6, family: 'c', price: 0.192, reqPerSec: 48227, latency: 4.12, jvmStartup: 3079, coldStart: 31104 },
            { name: 'r6id.xlarge', arch: 'intel', gen: 6, family: 'r', price: 0.363, reqPerSec: 47989, latency: 4.09, jvmStartup: 2886, coldStart: 32076 },
            { name: 'm6i.xlarge', arch: 'intel', gen: 6, family: 'm', price: 0.236, reqPerSec: 47573, latency: 4.13, jvmStartup: 2735, coldStart: 30196 },
            { name: 'r7gd.xlarge', arch: 'graviton', gen: 7, family: 'r', price: 0.327, reqPerSec: 47479, latency: 4.20, jvmStartup: 2229, coldStart: 32183 },
            { name: 'm7gd.xlarge', arch: 'graviton', gen: 7, family: 'm', price: 0.263, reqPerSec: 44304, latency: 4.45, jvmStartup: 2263, coldStart: 31263 },
            { name: 'c7g.xlarge', arch: 'graviton', gen: 7, family: 'c', price: 0.163, reqPerSec: 44081, latency: 4.55, jvmStartup: 2336, coldStart: 30298 },
            { name: 'c7gd.xlarge', arch: 'graviton', gen: 7, family: 'c', price: 0.208, reqPerSec: 43984, latency: 4.58, jvmStartup: 2234, coldStart: 30609 },
            { name: 'm7g.xlarge', arch: 'graviton', gen: 7, family: 'm', price: 0.201, reqPerSec: 42303, latency: 4.67, jvmStartup: 2344, coldStart: 30628 },
            { name: 'm5zn.xlarge', arch: 'intel', gen: 5, family: 'm', price: 0.406, reqPerSec: 40466, latency: 4.93, jvmStartup: 2708, coldStart: 30214 },
            { name: 'c5n.xlarge', arch: 'intel', gen: 5, family: 'c', price: 0.244, reqPerSec: 36792, latency: 5.39, jvmStartup: 3362, coldStart: 30059 },
            { name: 'c5d.xlarge', arch: 'intel', gen: 5, family: 'c', price: 0.220, reqPerSec: 35918, latency: 5.54, jvmStartup: 3356, coldStart: 30031 },
            { name: 'r5b.xlarge', arch: 'intel', gen: 5, family: 'r', price: 0.356, reqPerSec: 35581, latency: 5.59, jvmStartup: 3590, coldStart: 30499 },
            { name: 'c5.xlarge', arch: 'intel', gen: 5, family: 'c', price: 0.192, reqPerSec: 35486, latency: 5.59, jvmStartup: 2914, coldStart: 30697 },
            { name: 'm5.xlarge', arch: 'intel', gen: 5, family: 'm', price: 0.236, reqPerSec: 34624, latency: 5.75, jvmStartup: 3621, coldStart: 30272 },
            { name: 'r5d.xlarge', arch: 'intel', gen: 5, family: 'r', price: 0.346, reqPerSec: 34559, latency: 5.76, jvmStartup: 3067, coldStart: 30264 },
            { name: 'r5n.xlarge', arch: 'intel', gen: 5, family: 'r', price: 0.356, reqPerSec: 34002, latency: 5.85, jvmStartup: 3597, coldStart: 31091 },
            { name: 'r5dn.xlarge', arch: 'intel', gen: 5, family: 'r', price: 0.398, reqPerSec: 33900, latency: 5.88, jvmStartup: 3268, coldStart: 30571 },
            { name: 'r5.xlarge', arch: 'intel', gen: 5, family: 'r', price: 0.304, reqPerSec: 33582, latency: 5.92, jvmStartup: 3419, coldStart: 0 },
            { name: 'm6in.xlarge', arch: 'intel', gen: 6, family: 'm', price: 0.337, reqPerSec: 32201, latency: 3.91, jvmStartup: 2748, coldStart: 30348 },
            { name: 'r6gd.xlarge', arch: 'graviton', gen: 6, family: 'r', price: 0.277, reqPerSec: 31725, latency: 6.30, jvmStartup: 3008, coldStart: 30723 },
            { name: 'c6gn.xlarge', arch: 'graviton', gen: 6, family: 'c', price: 0.195, reqPerSec: 30461, latency: 6.59, jvmStartup: 3161, coldStart: 30063 },
            { name: 'm6gd.xlarge', arch: 'graviton', gen: 6, family: 'm', price: 0.222, reqPerSec: 30452, latency: 6.59, jvmStartup: 3260, coldStart: 30282 },
            { name: 'c6gd.xlarge', arch: 'graviton', gen: 6, family: 'c', price: 0.176, reqPerSec: 30165, latency: 6.77, jvmStartup: 3193, coldStart: 30229 },
            { name: 'c5a.xlarge', arch: 'amd', gen: 5, family: 'c', price: 0.172, reqPerSec: 30147, latency: 6.70, jvmStartup: 3000, coldStart: 31753 },
            { name: 'c6g.xlarge', arch: 'graviton', gen: 6, family: 'c', price: 0.154, reqPerSec: 29313, latency: 6.92, jvmStartup: 2978, coldStart: 30651 },
            { name: 'r6g.xlarge', arch: 'graviton', gen: 6, family: 'r', price: 0.244, reqPerSec: 29036, latency: 6.90, jvmStartup: 3152, coldStart: 31882 },
            { name: 'm6g.xlarge', arch: 'graviton', gen: 6, family: 'm', price: 0.188, reqPerSec: 28442, latency: 7.02, jvmStartup: 3289, coldStart: 30031 },
            { name: 'r5ad.xlarge', arch: 'amd', gen: 5, family: 'r', price: 0.316, reqPerSec: 23540, latency: 8.47, jvmStartup: 4804, coldStart: 29655 },
            { name: 'm5ad.xlarge', arch: 'amd', gen: 5, family: 'm', price: 0.254, reqPerSec: 22924, latency: 8.72, jvmStartup: 4305, coldStart: 29701 },
            { name: 'r5a.xlarge', arch: 'amd', gen: 5, family: 'r', price: 0.272, reqPerSec: 22845, latency: 8.73, jvmStartup: 4175, coldStart: 30352 },
            { name: 'm5a.xlarge', arch: 'amd', gen: 5, family: 'm', price: 0.212, reqPerSec: 22616, latency: 8.79, jvmStartup: 4686, coldStart: 30069 },
            { name: 'm5d.xlarge', arch: 'intel', gen: 5, family: 'm', price: 0.278, reqPerSec: 15973, latency: 5.49, jvmStartup: 3298, coldStart: 30092 },
        ];

        const colorMap = { graviton: '#10b981', intel: '#3b82f6', amd: '#ef4444' };

        // 차트 1: Top 20 Requests/sec
        const top20Throughput = [...allInstances].sort((a, b) => b.reqPerSec - a.reqPerSec).slice(0, 20);
        new Chart(document.getElementById('top20ThroughputChart'), {
            type: 'bar',
            data: {
                labels: top20Throughput.map(i => i.name),
                datasets: [{
                    label: 'Requests/sec',
                    data: top20Throughput.map(i => i.reqPerSec),
                    backgroundColor: top20Throughput.map(i => colorMap[i.arch]),
                    borderRadius: 4,
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    x: { title: { display: true, text: 'Requests/sec' } },
                    y: { ticks: { font: { size: 11 } } }
                }
            }
        });

        // 차트 2: Top 20 Latency
        const top20Latency = [...allInstances].sort((a, b) => a.latency - b.latency).slice(0, 20);
        new Chart(document.getElementById('top20LatencyChart'), {
            type: 'bar',
            data: {
                labels: top20Latency.map(i => i.name),
                datasets: [{
                    label: 'Latency (ms)',
                    data: top20Latency.map(i => i.latency),
                    backgroundColor: top20Latency.map(i => colorMap[i.arch]),
                    borderRadius: 4,
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { x: { title: { display: true, text: 'Latency (ms)' } } }
            }
        });

        // 차트 3: 8세대 비교
        const gen8Intel = allInstances.filter(i => i.gen === 8 && i.arch === 'intel');
        const gen8Graviton = allInstances.filter(i => i.gen === 8 && i.arch === 'graviton');
        new Chart(document.getElementById('gen8CompareChart'), {
            type: 'bar',
            data: {
                labels: ['Req/s (천)', 'Latency (ms)', 'JVM Startup (초)'],
                datasets: [
                    {
                        label: 'Intel 8세대 평균',
                        data: [
                            Math.round(gen8Intel.reduce((s, i) => s + i.reqPerSec, 0) / gen8Intel.length / 1000),
                            +(gen8Intel.reduce((s, i) => s + i.latency, 0) / gen8Intel.length).toFixed(2),
                            +(gen8Intel.filter(i => i.jvmStartup > 0).reduce((s, i) => s + i.jvmStartup, 0) / gen8Intel.filter(i => i.jvmStartup > 0).length / 1000).toFixed(2)
                        ],
                        backgroundColor: '#3b82f6',
                        borderRadius: 6
                    },
                    {
                        label: 'Graviton 8세대 평균',
                        data: [
                            Math.round(gen8Graviton.reduce((s, i) => s + i.reqPerSec, 0) / gen8Graviton.length / 1000),
                            +(gen8Graviton.reduce((s, i) => s + i.latency, 0) / gen8Graviton.length).toFixed(2),
                            +(gen8Graviton.reduce((s, i) => s + i.jvmStartup, 0) / gen8Graviton.length / 1000).toFixed(2)
                        ],
                        backgroundColor: '#10b981',
                        borderRadius: 6
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { position: 'top' } }
            }
        });

        // 차트 4: Top 20 JVM Startup
        const top20JvmStartup = [...allInstances].filter(i => i.jvmStartup > 0).sort((a, b) => a.jvmStartup - b.jvmStartup).slice(0, 20);
        new Chart(document.getElementById('top20JvmStartupChart'), {
            type: 'bar',
            data: {
                labels: top20JvmStartup.map(i => i.name),
                datasets: [{
                    label: 'JVM Startup (ms)',
                    data: top20JvmStartup.map(i => i.jvmStartup),
                    backgroundColor: top20JvmStartup.map(i => colorMap[i.arch]),
                    borderRadius: 4,
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    x: { title: { display: true, text: 'JVM Startup (ms)' } },
                    y: { ticks: { font: { size: 11 } } }
                }
            }
        });

        // 차트 5: JVM 아키텍처 비교
        const graviton8Jvm = allInstances.filter(i => i.gen === 8 && i.arch === 'graviton');
        const intel8Jvm = allInstances.filter(i => i.gen === 8 && i.arch === 'intel' && i.jvmStartup > 0);
        new Chart(document.getElementById('jvmArchCompareChart'), {
            type: 'bar',
            data: {
                labels: ['JVM Startup (ms)'],
                datasets: [
                    { label: 'Intel 8세대', data: [Math.round(intel8Jvm.reduce((s, i) => s + i.jvmStartup, 0) / intel8Jvm.length)], backgroundColor: '#3b82f6', borderRadius: 6 },
                    { label: 'Graviton 8세대', data: [Math.round(graviton8Jvm.reduce((s, i) => s + i.jvmStartup, 0) / graviton8Jvm.length)], backgroundColor: '#10b981', borderRadius: 6 }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { position: 'top' } },
                scales: { y: { beginAtZero: true, title: { display: true, text: 'JVM Startup (ms)' } } }
            }
        });

        // 차트 6: 세대별 처리량
        const genThroughputData = { labels: ['5세대', '6세대', '7세대', '8세대'], intel: [], graviton: [] };
        [5, 6, 7, 8].forEach(gen => {
            const intel = allInstances.filter(i => i.gen === gen && (i.arch === 'intel' || i.arch === 'amd'));
            const graviton = allInstances.filter(i => i.gen === gen && i.arch === 'graviton');
            genThroughputData.intel.push(intel.length ? Math.round(intel.reduce((s, i) => s + i.reqPerSec, 0) / intel.length) : null);
            genThroughputData.graviton.push(graviton.length ? Math.round(graviton.reduce((s, i) => s + i.reqPerSec, 0) / graviton.length) : null);
        });

        new Chart(document.getElementById('genThroughputChart'), {
            type: 'bar',
            data: {
                labels: genThroughputData.labels,
                datasets: [
                    { label: 'Intel/AMD (x86)', data: genThroughputData.intel, backgroundColor: '#3b82f6', borderRadius: 6 },
                    { label: 'Graviton (arm64)', data: genThroughputData.graviton, backgroundColor: '#10b981', borderRadius: 6 }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { position: 'top' } },
                scales: { y: { beginAtZero: true, title: { display: true, text: 'Requests/sec' } } }
            }
        });

        // 차트 7: 세대별 JVM Startup
        const genJvmData = { labels: ['5세대', '6세대', '7세대', '8세대'], intel: [], graviton: [] };
        [5, 6, 7, 8].forEach(gen => {
            const intel = allInstances.filter(i => i.gen === gen && (i.arch === 'intel' || i.arch === 'amd') && i.jvmStartup > 0);
            const graviton = allInstances.filter(i => i.gen === gen && i.arch === 'graviton' && i.jvmStartup > 0);
            genJvmData.intel.push(intel.length ? Math.round(intel.reduce((s, i) => s + i.jvmStartup, 0) / intel.length) : null);
            genJvmData.graviton.push(graviton.length ? Math.round(graviton.reduce((s, i) => s + i.jvmStartup, 0) / graviton.length) : null);
        });

        new Chart(document.getElementById('genJvmStartupChart'), {
            type: 'bar',
            data: {
                labels: genJvmData.labels,
                datasets: [
                    { label: 'Intel/AMD (x86)', data: genJvmData.intel, backgroundColor: '#3b82f6', borderRadius: 6 },
                    { label: 'Graviton (arm64)', data: genJvmData.graviton, backgroundColor: '#10b981', borderRadius: 6 }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { position: 'top' } },
                scales: { y: { beginAtZero: true, title: { display: true, text: 'JVM Startup (ms)' } } }
            }
        });

        // 차트 8: 세대별 처리량 (아키텍처 분리)
        const genArchThroughputData = { intel: [], graviton: [], amd: [] };
        [5, 6, 7, 8].forEach(gen => {
            const intel = allInstances.filter(i => i.gen === gen && i.arch === 'intel');
            const graviton = allInstances.filter(i => i.gen === gen && i.arch === 'graviton');
            const amd = allInstances.filter(i => i.gen === gen && i.arch === 'amd');
            genArchThroughputData.intel.push(intel.length ? Math.round(intel.reduce((s, i) => s + i.reqPerSec, 0) / intel.length) : null);
            genArchThroughputData.graviton.push(graviton.length ? Math.round(graviton.reduce((s, i) => s + i.reqPerSec, 0) / graviton.length) : null);
            genArchThroughputData.amd.push(amd.length ? Math.round(amd.reduce((s, i) => s + i.reqPerSec, 0) / amd.length) : null);
        });

        new Chart(document.getElementById('genArchThroughputChart'), {
            type: 'bar',
            data: {
                labels: ['5세대', '6세대', '7세대', '8세대'],
                datasets: [
                    { label: 'Intel', data: genArchThroughputData.intel, backgroundColor: '#3b82f6', borderRadius: 6 },
                    { label: 'Graviton', data: genArchThroughputData.graviton, backgroundColor: '#10b981', borderRadius: 6 },
                    { label: 'AMD', data: genArchThroughputData.amd, backgroundColor: '#ef4444', borderRadius: 6 }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { position: 'top' } },
                scales: { y: { beginAtZero: true, title: { display: true, text: 'Requests/sec' } } }
            }
        });

        // 차트 9: 세대별 JVM Startup (아키텍처 분리)
        const genArchJvmData = { intel: [], graviton: [], amd: [] };
        [5, 6, 7, 8].forEach(gen => {
            const intel = allInstances.filter(i => i.gen === gen && i.arch === 'intel' && i.jvmStartup > 0);
            const graviton = allInstances.filter(i => i.gen === gen && i.arch === 'graviton' && i.jvmStartup > 0);
            const amd = allInstances.filter(i => i.gen === gen && i.arch === 'amd' && i.jvmStartup > 0);
            genArchJvmData.intel.push(intel.length ? Math.round(intel.reduce((s, i) => s + i.jvmStartup, 0) / intel.length) : null);
            genArchJvmData.graviton.push(graviton.length ? Math.round(graviton.reduce((s, i) => s + i.jvmStartup, 0) / graviton.length) : null);
            genArchJvmData.amd.push(amd.length ? Math.round(amd.reduce((s, i) => s + i.jvmStartup, 0) / amd.length) : null);
        });

        new Chart(document.getElementById('genArchJvmChart'), {
            type: 'bar',
            data: {
                labels: ['5세대', '6세대', '7세대', '8세대'],
                datasets: [
                    { label: 'Intel', data: genArchJvmData.intel, backgroundColor: '#3b82f6', borderRadius: 6 },
                    { label: 'Graviton', data: genArchJvmData.graviton, backgroundColor: '#10b981', borderRadius: 6 },
                    { label: 'AMD', data: genArchJvmData.amd, backgroundColor: '#ef4444', borderRadius: 6 }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { position: 'top' } },
                scales: { y: { beginAtZero: true, title: { display: true, text: 'JVM Startup (ms)' } } }
            }
        });

        // 차트 10: 패밀리별 비교
        const familyData = { labels: ['C (컴퓨팅)', 'M (범용)', 'R (메모리)'], intel: [], graviton: [] };
        ['c', 'm', 'r'].forEach(family => {
            const intel = allInstances.filter(i => i.family === family && (i.arch === 'intel' || i.arch === 'amd'));
            const graviton = allInstances.filter(i => i.family === family && i.arch === 'graviton');
            familyData.intel.push(Math.round(intel.reduce((s, i) => s + i.reqPerSec, 0) / intel.length));
            familyData.graviton.push(Math.round(graviton.reduce((s, i) => s + i.reqPerSec, 0) / graviton.length));
        });

        new Chart(document.getElementById('familyChart'), {
            type: 'bar',
            data: {
                labels: familyData.labels,
                datasets: [
                    { label: 'Intel/AMD', data: familyData.intel, backgroundColor: '#3b82f6', borderRadius: 6 },
                    { label: 'Graviton', data: familyData.graviton, backgroundColor: '#10b981', borderRadius: 6 }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { position: 'top' } },
                scales: { y: { beginAtZero: true, title: { display: true, text: 'Requests/sec' } } }
            }
        });

        // 차트 11: 가격 대비 성능 버블
        const bubbleData = allInstances.map(i => ({
            x: i.price,
            y: i.reqPerSec,
            r: 8,
            label: i.name,
            arch: i.arch
        }));

        new Chart(document.getElementById('pricePerformanceChart'), {
            type: 'bubble',
            data: {
                datasets: [
                    { label: 'Graviton', data: bubbleData.filter(d => d.arch === 'graviton'), backgroundColor: 'rgba(16, 185, 129, 0.6)', borderColor: '#10b981' },
                    { label: 'Intel', data: bubbleData.filter(d => d.arch === 'intel'), backgroundColor: 'rgba(59, 130, 246, 0.6)', borderColor: '#3b82f6' },
                    { label: 'AMD', data: bubbleData.filter(d => d.arch === 'amd'), backgroundColor: 'rgba(239, 68, 68, 0.6)', borderColor: '#ef4444' }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: { callbacks: { label: (ctx) => [`${ctx.raw.label}`, `$${ctx.raw.x.toFixed(3)}/hr`, `${ctx.raw.y.toLocaleString()} req/s`] } }
                },
                scales: {
                    x: { title: { display: true, text: '시간당 비용 ($)' }, min: 0.1, max: 0.45 },
                    y: { title: { display: true, text: 'Requests/sec' }, min: 10000, max: 105000 }
                }
            }
        });

        // 차트 12: 가성비 Top 15
        const efficiency = allInstances.map(i => ({ ...i, efficiency: Math.round(i.reqPerSec / (i.price * 1000)) }))
            .sort((a, b) => b.efficiency - a.efficiency).slice(0, 15);

        new Chart(document.getElementById('costEfficiencyChart'), {
            type: 'bar',
            data: {
                labels: efficiency.map(i => i.name),
                datasets: [{
                    label: '효율성 점수',
                    data: efficiency.map(i => i.efficiency),
                    backgroundColor: efficiency.map(i => colorMap[i.arch]),
                    borderRadius: 6,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { y: { beginAtZero: true, title: { display: true, text: '효율성 점수' } } }
            }
        });

        // 차트 13: 피해야 할 인스턴스
        const avoidInstances = allInstances.filter(i => ['m5d.xlarge', 'm5a.xlarge', 'r5a.xlarge', 'm5ad.xlarge', 'r5ad.xlarge'].includes(i.name));
        new Chart(document.getElementById('avoidChart'), {
            type: 'bar',
            data: {
                labels: avoidInstances.map(i => i.name),
                datasets: [{ label: 'Requests/sec', data: avoidInstances.map(i => i.reqPerSec), backgroundColor: '#ef4444', borderRadius: 6 }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { y: { beginAtZero: true, title: { display: true, text: 'Requests/sec' } } }
            }
        });

        // 전체 결과 테이블
        const tableData = [...allInstances].sort((a, b) => b.reqPerSec - a.reqPerSec).map((inst, idx) => ({
            ...inst,
            rank: idx + 1,
            efficiency: Math.round(inst.reqPerSec / (inst.price * 1000))
        }));

        const archLabel = { graviton: 'Graviton', intel: 'Intel', amd: 'AMD' };
        const archBadge = { graviton: 'badge-graviton', intel: 'badge-intel', amd: 'badge-amd' };

        function renderTable(data) {
            const tbody = document.getElementById('fullResultsBody');
            tbody.innerHTML = data.map((inst) => `
                <tr>
                    <td>${inst.rank}</td>
                    <td><strong>${inst.name}</strong></td>
                    <td><span class="badge ${archBadge[inst.arch]}">${archLabel[inst.arch]}</span></td>
                    <td>${inst.gen}세대</td>
                    <td>${inst.reqPerSec.toLocaleString()}</td>
                    <td>${inst.latency}</td>
                    <td>${inst.jvmStartup > 0 ? inst.jvmStartup.toLocaleString() : '-'}</td>
                    <td>$${inst.price.toFixed(3)}</td>
                    <td>${inst.efficiency}</td>
                </tr>
            `).join('');
        }

        renderTable(tableData);

        // 필터링
        function filterTable() {
            const search = document.getElementById('tableSearch').value.toLowerCase();
            const arch = document.getElementById('archFilter').value;
            const gen = document.getElementById('genFilter').value;
            const family = document.getElementById('familyFilter').value;

            let filtered = tableData.filter(inst => {
                if (search && !inst.name.toLowerCase().includes(search)) return false;
                if (arch && inst.arch !== arch) return false;
                if (gen && inst.gen !== parseInt(gen)) return false;
                if (family && inst.family !== family) return false;
                return true;
            });

            renderTable(filtered);
        }

        document.getElementById('tableSearch').addEventListener('input', filterTable);
        document.getElementById('archFilter').addEventListener('change', filterTable);
        document.getElementById('genFilter').addEventListener('change', filterTable);
        document.getElementById('familyFilter').addEventListener('change', filterTable);

        // 정렬
        let sortDirection = {};
        document.querySelectorAll('#fullResultsTable th[data-sort]').forEach(th => {
            th.addEventListener('click', () => {
                const field = th.dataset.sort;
                sortDirection[field] = !sortDirection[field];
                const dir = sortDirection[field] ? 1 : -1;

                const sorted = [...tableData].sort((a, b) => {
                    if (field === 'name') return a.name.localeCompare(b.name) * dir;
                    if (field === 'arch') return a.arch.localeCompare(b.arch) * dir;
                    return (a[field] - b[field]) * dir;
                });

                const search = document.getElementById('tableSearch').value.toLowerCase();
                const arch = document.getElementById('archFilter').value;
                const gen = document.getElementById('genFilter').value;
                const family = document.getElementById('familyFilter').value;

                let filtered = sorted.filter(inst => {
                    if (search && !inst.name.toLowerCase().includes(search)) return false;
                    if (arch && inst.arch !== arch) return false;
                    if (gen && inst.gen !== parseInt(gen)) return false;
                    if (family && inst.family !== family) return false;
                    return true;
                });

                renderTable(filtered);
            });
        });
    </script>
</body>
</html>
