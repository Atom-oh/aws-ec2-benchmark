<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spring Boot ë²¤ì¹˜ë§ˆí¬ ë¦¬í¬íŠ¸</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --graviton: #10b981;
            --intel: #3b82f6;
            --amd: #ef4444;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
            --muted: #64748b;
            --border: #e2e8f0;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; }
        .container { max-width: 1600px; margin: 0 auto; padding: 2rem; }

        .header { background: linear-gradient(135deg, #059669 0%, #10b981 50%, #3b82f6 100%); color: white; padding: 3rem 2rem; border-radius: 1rem; margin-bottom: 2rem; text-align: center; }
        .header h1 { font-size: 2.5rem; margin-bottom: 0.5rem; }
        .header p { opacity: 0.9; }

        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; }
        .summary-card { background: var(--card); border-radius: 1rem; padding: 1.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); border-left: 4px solid var(--graviton); }
        .summary-card.intel { border-left-color: var(--intel); }
        .summary-card.warning { border-left-color: #f59e0b; }
        .summary-card h3 { color: var(--muted); font-size: 0.875rem; text-transform: uppercase; margin-bottom: 0.5rem; }
        .summary-card .value { font-size: 1.75rem; font-weight: 700; color: var(--text); }
        .summary-card .detail { color: var(--muted); font-size: 0.875rem; margin-top: 0.25rem; }

        .section { background: var(--card); border-radius: 1rem; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .section h2 { font-size: 1.5rem; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--border); }

        .chart-container { height: 450px; margin: 1rem 0; }
        .chart-container.tall { height: 550px; }
        .chart-container.extra-tall { height: 700px; }
        .chart-title { text-align: center; font-weight: 600; margin-bottom: 0.5rem; color: var(--text); }

        .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 2rem; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; }
        @media (max-width: 1024px) { .grid-2, .grid-3 { grid-template-columns: 1fr; } }

        .insights { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-left: 4px solid #f59e0b; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0; }
        .insights h4 { color: #92400e; margin-bottom: 0.75rem; }
        .insights ul { margin-left: 1.5rem; color: #78350f; }
        .insights li { margin-bottom: 0.5rem; }

        .warning-box { background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%); border-left: 4px solid #ef4444; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0; }
        .warning-box h4 { color: #991b1b; margin-bottom: 0.75rem; }
        .warning-box ul { margin-left: 1.5rem; color: #7f1d1d; }

        .success-box { background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); border-left: 4px solid #10b981; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0; }
        .success-box h4 { color: #065f46; margin-bottom: 0.75rem; }
        .success-box ul { margin-left: 1.5rem; color: #064e3b; }

        table { width: 100%; border-collapse: collapse; margin: 1rem 0; font-size: 0.9rem; }
        th, td { padding: 0.75rem; text-align: left; border-bottom: 1px solid var(--border); }
        th { background: var(--bg); font-weight: 600; position: sticky; top: 0; cursor: pointer; }
        tr:hover { background: var(--bg); }

        .badge { display: inline-block; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; }
        .badge-graviton { background: #d1fae5; color: #065f46; }
        .badge-intel { background: #dbeafe; color: #1e40af; }
        .badge-amd { background: #fee2e2; color: #991b1b; }

        .comparison-table { margin: 1rem 0; }
        .comparison-table th { background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%); }
        .comparison-table .highlight { background: #d1fae5; font-weight: 600; }
        .comparison-table .warning { background: #fee2e2; }

        .nav { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 2rem; }
        .nav a { padding: 0.5rem 1rem; background: var(--card); border-radius: 0.5rem; text-decoration: none; color: var(--text); font-size: 0.875rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .nav a:hover { background: var(--border); }

        .footer { text-align: center; padding: 2rem; color: var(--muted); font-size: 0.875rem; }

        .filter-row { display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap; }
        .filter-row input, .filter-row select { padding: 0.5rem 1rem; border: 1px solid var(--border); border-radius: 0.5rem; }

        .tab-buttons { display: flex; gap: 0.5rem; margin-bottom: 1rem; }
        .tab-btn { padding: 0.5rem 1rem; border: 1px solid var(--border); background: var(--card); border-radius: 0.5rem; cursor: pointer; }
        .tab-btn.active { background: var(--intel); color: white; border-color: var(--intel); }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸƒ Spring Boot ë²¤ì¹˜ë§ˆí¬ ë¦¬í¬íŠ¸</h1>
            <p>HTTP Throughput (wrk) & Cold Start ì„±ëŠ¥ ë¹„êµ - 3ê°€ì§€ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤</p>
            <p style="opacity: 0.7; margin-top: 0.5rem;">2026ë…„ 1ì›” | ì„œìš¸ ë¦¬ì „ (ap-northeast-2) | 51ê°œ ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…</p>
        </div>

        <div class="summary-grid">
            <div class="summary-card">
                <h3>ğŸ† ìµœê³  Throughput</h3>
                <div class="value">c7i-flex.xlarge</div>
                <div class="detail">101,658 req/sec (200 conn)</div>
            </div>
            <div class="summary-card">
                <h3>âš¡ ìµœê³  Cold Start</h3>
                <div class="value">c8g.xlarge</div>
                <div class="detail">4.29ì´ˆ (Graviton4)</div>
            </div>
            <div class="summary-card intel">
                <h3>ğŸ“ˆ 8ì„¸ëŒ€ vs 7ì„¸ëŒ€ (Standard)</h3>
                <div class="value">+27% ë¹ ë¦„</div>
                <div class="detail">wrk 200 conn: 71k â†’ 93k req/sec</div>
            </div>
            <div class="summary-card warning">
                <h3>âš ï¸ 7ì„¸ëŒ€ Flex ì„±ëŠ¥</h3>
                <div class="value">ì¬í…ŒìŠ¤íŠ¸ í™•ì¸</div>
                <div class="detail">c7i-flex ê³ ì„±ëŠ¥ ì¬í˜„ í™•ì¸ë¨</div>
            </div>
        </div>

        <nav class="nav">
            <a href="#methodology">í…ŒìŠ¤íŠ¸ ë°©ë²•ë¡ </a>
            <a href="#wrk-scenarios">wrk ì‹œë‚˜ë¦¬ì˜¤ë³„ ê²°ê³¼</a>
            <a href="#generation">ì„¸ëŒ€ë³„ ì•„í‚¤í…ì²˜ ë¹„êµ</a>
            <a href="#latency">Latency ë¶„ì„</a>
            <a href="#flex-analysis">Flex ì„±ëŠ¥ ë¶„ì„</a>
            <a href="#coldstart">Cold Start ë¶„ì„</a>
            <a href="#full-results">ì „ì²´ ê²°ê³¼</a>
        </nav>

        <!-- í…ŒìŠ¤íŠ¸ ë°©ë²•ë¡  -->
        <div class="section" id="methodology">
            <h2>1. í…ŒìŠ¤íŠ¸ ë°©ë²•ë¡ </h2>

            <div class="grid-2">
                <div>
                    <h4 style="margin-bottom: 0.75rem;">í…ŒìŠ¤íŠ¸ í™˜ê²½</h4>
                    <table>
                        <tr><td style="width: 150px;"><strong>ì• í”Œë¦¬ì¼€ì´ì…˜</strong></td><td>Spring PetClinic 4.0.0</td></tr>
                        <tr><td><strong>Spring Boot</strong></td><td>4.0.1</td></tr>
                        <tr><td><strong>Java</strong></td><td>OpenJDK 21.0.9</td></tr>
                        <tr><td><strong>JVM ì˜µì…˜</strong></td><td>-XX:MaxRAMPercentage=60.0 -XX:+UseG1GC</td></tr>
                        <tr><td><strong>í”Œë«í¼</strong></td><td>Amazon EKS 1.34</td></tr>
                        <tr><td><strong>ë…¸ë“œ í”„ë¡œë¹„ì €ë‹</strong></td><td>Karpenter 1.5.0</td></tr>
                        <tr><td><strong>ë…¸ë“œ ê²©ë¦¬</strong></td><td>podAntiAffinity (ë‹¨ì¼ ë…¸ë“œ ë³´ì¥)</td></tr>
                    </table>
                </div>
                <div>
                    <h4 style="margin-bottom: 0.75rem;">wrk ë²¤ì¹˜ë§ˆí¬ ì„¤ì •</h4>
                    <table>
                        <tr><td style="width: 150px;"><strong>wrk ë²„ì „</strong></td><td>4.2.0 (epoll)</td></tr>
                        <tr><td><strong>í…ŒìŠ¤íŠ¸ 1</strong></td><td>50 conn, 60ì´ˆ (Light Load)</td></tr>
                        <tr><td><strong>í…ŒìŠ¤íŠ¸ 2</strong></td><td>100 conn, 60ì´ˆ (Normal Load)</td></tr>
                        <tr><td><strong>í…ŒìŠ¤íŠ¸ 3</strong></td><td>200 conn, 30ì´ˆ (High Load)</td></tr>
                        <tr><td><strong>ë°˜ë³µ íšŸìˆ˜</strong></td><td>5íšŒ</td></tr>
                        <tr><td><strong>ì¸ìŠ¤í„´ìŠ¤</strong></td><td>51ì¢… (xlarge, 4 vCPU)</td></tr>
                    </table>
                </div>
            </div>

            <div class="success-box" style="margin-top: 1.5rem;">
                <h4>ğŸŒ ë„¤íŠ¸ì›Œí¬ êµ¬ì„± - Same Zone ë°°ì¹˜</h4>
                <ul>
                    <li><strong>wrk í´ë¼ì´ì–¸íŠ¸ì™€ Spring Boot ì„œë²„ëŠ” ê°™ì€ Availability Zoneì— ë°°ì¹˜</strong></li>
                    <li><code>podAffinity</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ wrk í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì™€ ë™ì¼í•œ Zoneì— ìŠ¤ì¼€ì¤„ë§</li>
                    <li>ë„¤íŠ¸ì›Œí¬ ì§€ì—° ìµœì†Œí™”ë¡œ ìˆœìˆ˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„±ëŠ¥ ì¸¡ì •</li>
                </ul>
            </div>

            <div class="insights">
                <h4>ì¸¡ì • ë©”íŠ¸ë¦­</h4>
                <ul>
                    <li><strong>Requests/sec</strong>: ì´ˆë‹¹ ì²˜ë¦¬ HTTP ìš”ì²­ ìˆ˜ - ë†’ì„ìˆ˜ë¡ ì¢‹ìŒ</li>
                    <li><strong>Latency P50</strong>: 50% ìš”ì²­ ì‘ë‹µ ì‹œê°„ - ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ</li>
                    <li><strong>Latency P99</strong>: 99% ìš”ì²­ ì‘ë‹µ ì‹œê°„ - ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ</li>
                    <li><strong>Cold Start</strong>: JVM + Spring Boot + PetClinic ì´ˆê¸°í™” ì‹œê°„ - ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ</li>
                </ul>
            </div>
        </div>

        <!-- wrk ì‹œë‚˜ë¦¬ì˜¤ë³„ ê²°ê³¼ -->
        <div class="section" id="wrk-scenarios">
            <h2>2. wrk í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ë³„ ê²°ê³¼</h2>

            <div class="tab-buttons">
                <button class="tab-btn active" onclick="showScenario('200')">High Load (200 conn)</button>
                <button class="tab-btn" onclick="showScenario('100')">Normal Load (100 conn)</button>
                <button class="tab-btn" onclick="showScenario('50')">Light Load (50 conn)</button>
            </div>

            <div id="scenario-200" class="scenario-content">
                <div class="chart-container tall">
                    <div class="chart-title">Top 20 ì¸ìŠ¤í„´ìŠ¤ - High Load (200 conn, 30s)</div>
                    <canvas id="wrkTop20Chart200"></canvas>
                </div>
            </div>

            <div id="scenario-100" class="scenario-content" style="display: none;">
                <div class="chart-container tall">
                    <div class="chart-title">Top 20 ì¸ìŠ¤í„´ìŠ¤ - Normal Load (100 conn, 60s)</div>
                    <canvas id="wrkTop20Chart100"></canvas>
                </div>
            </div>

            <div id="scenario-50" class="scenario-content" style="display: none;">
                <div class="chart-container tall">
                    <div class="chart-title">Top 20 ì¸ìŠ¤í„´ìŠ¤ - Light Load (50 conn, 60s)</div>
                    <canvas id="wrkTop20Chart50"></canvas>
                </div>
            </div>

            <h3 style="margin: 2rem 0 1rem;">ì‹œë‚˜ë¦¬ì˜¤ë³„ ì„±ëŠ¥ ë¹„êµ (Top 10)</h3>
            <div class="chart-container tall">
                <div class="chart-title">ì¸ìŠ¤í„´ìŠ¤ë³„ 3ê°€ì§€ ë¶€í•˜ ì‹œë‚˜ë¦¬ì˜¤ ë¹„êµ</div>
                <canvas id="scenarioCompareChart"></canvas>
            </div>

            <div class="insights">
                <h4>í•µì‹¬ ì¸ì‚¬ì´íŠ¸</h4>
                <ul>
                    <li><strong>c7i-flexê°€ ëª¨ë“  ì‹œë‚˜ë¦¬ì˜¤ 1ìœ„</strong> - 50 conn: 87.5k, 100 conn: 94.6k, 200 conn: 101.7k req/sec</li>
                    <li><strong>ë¶€í•˜ ì¦ê°€ì— ë”°ë¥¸ ì„±ëŠ¥ ë³€í™”</strong>: 7ì„¸ëŒ€ FlexëŠ” ë¶€í•˜ ì¦ê°€ ì‹œ ì„±ëŠ¥ì´ ë” í–¥ìƒë˜ëŠ” íŒ¨í„´</li>
                    <li><strong>8ì„¸ëŒ€ Standard</strong>: ì•ˆì •ì ì¸ ì„±ëŠ¥, ë¶€í•˜ ì¦ê°€ì— ë”°ë¥¸ ì„±ëŠ¥ í–¥ìƒ í­ì´ í¼</li>
                </ul>
            </div>
        </div>

        <!-- ì„¸ëŒ€ë³„ ì•„í‚¤í…ì²˜ ë¹„êµ -->
        <div class="section" id="generation">
            <h2>3. ì„¸ëŒ€ë³„ ì•„í‚¤í…ì²˜ ì„±ëŠ¥ ë¹„êµ</h2>
            <p style="color: var(--muted); margin-bottom: 1rem;">5ì„¸ëŒ€: Intel + AMD | 6~8ì„¸ëŒ€: Intel + Graviton</p>

            <div class="chart-container extra-tall">
                <div class="chart-title">ì„¸ëŒ€ë³„ wrk Throughput í‰ê·  (200 conn, ì•„í‚¤í…ì²˜ êµ¬ë¶„)</div>
                <canvas id="genArchWrkChart"></canvas>
            </div>

            <div class="grid-2" style="margin-top: 2rem;">
                <div class="chart-container">
                    <div class="chart-title">ì„¸ëŒ€ë³„ 100 conn ì„±ëŠ¥</div>
                    <canvas id="genArch100Chart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">ì„¸ëŒ€ë³„ 50 conn ì„±ëŠ¥</div>
                    <canvas id="genArch50Chart"></canvas>
                </div>
            </div>

            <div class="insights">
                <h4>ì„¸ëŒ€ë³„ ì„±ëŠ¥ í–¥ìƒ</h4>
                <ul>
                    <li><strong>Intel 5ì„¸ëŒ€ â†’ 8ì„¸ëŒ€</strong>: +171% í–¥ìƒ (34k â†’ 93k req/sec)</li>
                    <li><strong>Graviton 6ì„¸ëŒ€ â†’ 8ì„¸ëŒ€</strong>: +137% í–¥ìƒ (31k â†’ 74k req/sec)</li>
                    <li><strong>Intel 7ì„¸ëŒ€ Flex</strong>: íŠ¹ì´ ì¼€ì´ìŠ¤ - Standardë³´ë‹¤ ë†’ì€ ì„±ëŠ¥ (ì¬í…ŒìŠ¤íŠ¸ í™•ì¸ë¨)</li>
                </ul>
            </div>
        </div>

        <!-- Latency ë¶„ì„ -->
        <div class="section" id="latency">
            <h2>4. Latency ë¶„ì„ (200 conn)</h2>

            <div class="grid-2">
                <div class="chart-container">
                    <div class="chart-title">Latency P50 (ì¤‘ì•™ê°’) - ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ</div>
                    <canvas id="latencyP50Chart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">Latency P99 (99í¼ì„¼íƒ€ì¼) - ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ</div>
                    <canvas id="latencyP99Chart"></canvas>
                </div>
            </div>

            <h3 style="margin: 2rem 0 1rem;">Throughput vs Latency</h3>
            <div class="chart-container tall">
                <div class="chart-title">ì²˜ë¦¬ëŸ‰ ëŒ€ë¹„ Latency (ë²„ë¸” í¬ê¸° = P99 Latency)</div>
                <canvas id="throughputLatencyChart"></canvas>
            </div>

            <div class="insights">
                <h4>Latency ì¸ì‚¬ì´íŠ¸</h4>
                <ul>
                    <li><strong>c7i-flex</strong>: ìµœê³  ì²˜ë¦¬ëŸ‰ + ë‚®ì€ latency (P50: 1.7ms, P99: 4.6ms)</li>
                    <li><strong>8ì„¸ëŒ€ Intel</strong>: P50 1.9-2.0msë¡œ ì•ˆì •ì ì¸ ì‘ë‹µ ì‹œê°„</li>
                    <li><strong>c6in ì£¼ì˜</strong>: P99 latencyê°€ 184msë¡œ ë§¤ìš° ë†’ìŒ (tail latency ë¬¸ì œ)</li>
                </ul>
            </div>
        </div>

        <!-- Flex ì„±ëŠ¥ ë¶„ì„ -->
        <div class="section" id="flex-analysis">
            <h2>5. Flex ì¸ìŠ¤í„´ìŠ¤ ì„±ëŠ¥ ë¶„ì„</h2>

            <div class="success-box">
                <h4>âœ… ì¬í…ŒìŠ¤íŠ¸ ê²°ê³¼: 7ì„¸ëŒ€ Flex ê³ ì„±ëŠ¥ í™•ì¸</h4>
                <ul>
                    <li><strong>c7i-flex ì¬í…ŒìŠ¤íŠ¸</strong>: 104,649 req/sec (ê¸°ì¡´ 101,657) â†’ ê³ ì„±ëŠ¥ ì¬í˜„ í™•ì¸</li>
                    <li><strong>m7i-flex ì¬í…ŒìŠ¤íŠ¸</strong>: 105,512 req/sec (ê¸°ì¡´ 97,607) â†’ ê³ ì„±ëŠ¥ ì¬í˜„ í™•ì¸</li>
                    <li>7ì„¸ëŒ€ Flexê°€ 8ì„¸ëŒ€ Flexë³´ë‹¤ wrk ì²˜ë¦¬ëŸ‰ì—ì„œ ë” ë†’ì€ ì„±ëŠ¥ì€ <strong>ì‹¤ì œ í˜„ìƒ</strong></li>
                </ul>
            </div>

            <h3 style="margin: 1.5rem 0 1rem;">Flex ì¸ìŠ¤í„´ìŠ¤ ìƒì„¸ ë¹„êµ</h3>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>ì¸ìŠ¤í„´ìŠ¤</th>
                        <th>50 conn</th>
                        <th>100 conn</th>
                        <th>200 conn</th>
                        <th>P99 Latency</th>
                        <th>Cold Start</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="badge badge-intel">c7i-flex.xlarge</span></td>
                        <td>87,512</td>
                        <td>94,639</td>
                        <td class="highlight"><strong>101,658</strong></td>
                        <td>4.59ms</td>
                        <td>5.08ì´ˆ</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-intel">m7i-flex.xlarge</span></td>
                        <td>79,660</td>
                        <td>88,417</td>
                        <td class="highlight"><strong>97,607</strong></td>
                        <td>5.02ms</td>
                        <td>5.35ì´ˆ</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-intel">c8i-flex.xlarge</span></td>
                        <td>61,541</td>
                        <td>80,121</td>
                        <td>91,741</td>
                        <td>4.76ms</td>
                        <td class="highlight">4.51ì´ˆ</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-intel">r8i-flex.xlarge</span></td>
                        <td>62,212</td>
                        <td>80,328</td>
                        <td>91,191</td>
                        <td>4.72ms</td>
                        <td class="highlight">4.69ì´ˆ</td>
                    </tr>
                </tbody>
            </table>

            <div class="grid-2" style="margin-top: 2rem;">
                <div class="chart-container">
                    <div class="chart-title">Flex vs Standard wrk ë¹„êµ (200 conn)</div>
                    <canvas id="flexWrkChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">Flex Cold Start ë¹„êµ</div>
                    <canvas id="flexColdChart"></canvas>
                </div>
            </div>

            <div class="insights" style="margin-top: 1.5rem;">
                <h4>ë¶„ì„ ë° ê²°ë¡ </h4>
                <ul>
                    <li><strong>7ì„¸ëŒ€ Flex ê³ ì„±ëŠ¥ ì›ì¸ ì¶”ì •</strong>: AWSì˜ ë¬¼ë¦¬ í˜¸ìŠ¤íŠ¸ í• ë‹¹ ì •ì±…, íŠ¹ì • CPU bin ì„ íƒ ë“±</li>
                    <li><strong>8ì„¸ëŒ€ Flex Cold Start ìš°ìˆ˜</strong>: JVM ì´ˆê¸°í™”ì—ì„œëŠ” 8ì„¸ëŒ€ê°€ í™•ì‹¤íˆ ë¹ ë¦„</li>
                    <li><strong>ì›Œí¬ë¡œë“œë³„ ì„ íƒ</strong>: ì§€ì†ì  ê³ ë¶€í•˜ëŠ” 7ì„¸ëŒ€ Flex, Cold Start ì¤‘ìš”í•˜ë©´ 8ì„¸ëŒ€</li>
                </ul>
            </div>
        </div>

        <!-- Cold Start ë¶„ì„ -->
        <div class="section" id="coldstart">
            <h2>6. Cold Start ì„±ëŠ¥ ë¶„ì„</h2>

            <div style="background: var(--bg); padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
                <strong>ì¸¡ì • ëŒ€ìƒ:</strong> Spring PetClinic (ì‹¤ì œ í”„ë¡œë•ì…˜ê¸‰ ìƒ˜í”Œ ì•±) ì‹œì‘ ì‹œê°„<br>
                <span style="color: var(--muted); font-size: 0.9rem;">JVM ë¶€íŒ… â†’ Spring Context ì´ˆê¸°í™” â†’ JPA/Hibernate ì„¤ì • â†’ ì›¹ ì„œë²„ ì‹œì‘ê¹Œì§€ ì „ì²´ ì‹œê°„</span>
            </div>

            <div class="chart-container tall">
                <div class="chart-title">Cold Start Top 20 (ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ)</div>
                <canvas id="coldstartTop20Chart"></canvas>
            </div>

            <div class="grid-2" style="margin-top: 2rem;">
                <div class="chart-container">
                    <div class="chart-title">ì„¸ëŒ€ë³„ Cold Start í‰ê·  (ì•„í‚¤í…ì²˜ êµ¬ë¶„)</div>
                    <canvas id="genArchColdChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">ì•„í‚¤í…ì²˜ë³„ Cold Start í‰ê· </div>
                    <canvas id="archColdChart"></canvas>
                </div>
            </div>

            <div class="insights">
                <h4>Cold Start ì¸ì‚¬ì´íŠ¸</h4>
                <ul>
                    <li><strong>Graviton4ê°€ ìµœê³ </strong> - c8g 4.29ì´ˆë¡œ ê°€ì¥ ë¹ ë¥¸ ì‹œì‘</li>
                    <li><strong>8ì„¸ëŒ€ Intel</strong>: 4.3-4.8ì´ˆëŒ€ë¡œ 7ì„¸ëŒ€(5.0-5.8ì´ˆ) ëŒ€ë¹„ 15-20% ê°œì„ </li>
                    <li><strong>5ì„¸ëŒ€ AMD</strong>: 11ì´ˆëŒ€ë¡œ ê°€ì¥ ëŠë¦¼ - ì„œë²„ë¦¬ìŠ¤/ì˜¤í† ìŠ¤ì¼€ì¼ë§ì— ë¶€ì í•©</li>
                </ul>
            </div>
        </div>

        <!-- ì „ì²´ ê²°ê³¼ -->
        <div class="section" id="full-results">
            <h2>7. ì „ì²´ ê²°ê³¼</h2>

            <div class="filter-row">
                <input type="text" id="searchInput" placeholder="ì¸ìŠ¤í„´ìŠ¤ ê²€ìƒ‰...">
                <select id="archFilter">
                    <option value="">ì „ì²´ ì•„í‚¤í…ì²˜</option>
                    <option value="graviton">Graviton</option>
                    <option value="intel">Intel</option>
                    <option value="amd">AMD</option>
                </select>
                <select id="genFilter">
                    <option value="">ì „ì²´ ì„¸ëŒ€</option>
                    <option value="5">5ì„¸ëŒ€</option>
                    <option value="6">6ì„¸ëŒ€</option>
                    <option value="7">7ì„¸ëŒ€</option>
                    <option value="8">8ì„¸ëŒ€</option>
                </select>
                <select id="scenarioFilter">
                    <option value="rps200">200 conn (High Load)</option>
                    <option value="rps100">100 conn (Normal)</option>
                    <option value="rps50">50 conn (Light)</option>
                </select>
            </div>

            <div style="overflow-x: auto;">
                <table id="resultsTable">
                    <thead>
                        <tr>
                            <th onclick="sortTable(0)">ì¸ìŠ¤í„´ìŠ¤ â†•</th>
                            <th>ì•„í‚¤í…ì²˜</th>
                            <th>ì„¸ëŒ€</th>
                            <th onclick="sortTable(3)">50 conn â†•</th>
                            <th onclick="sortTable(4)">100 conn â†•</th>
                            <th onclick="sortTable(5)">200 conn â†•</th>
                            <th onclick="sortTable(6)">P50 â†•</th>
                            <th onclick="sortTable(7)">P99 â†•</th>
                            <th onclick="sortTable(8)">Cold Start â†•</th>
                        </tr>
                    </thead>
                    <tbody id="resultsBody">
                    </tbody>
                </table>
            </div>
        </div>

        <div class="section">
            <h2>8. ê²°ë¡  ë° ê¶Œì¥ì‚¬í•­</h2>

            <div class="grid-2">
                <div class="insights">
                    <h4>âœ… ê¶Œì¥ ì¸ìŠ¤í„´ìŠ¤</h4>
                    <ul>
                        <li><strong>ìµœê³  Throughput</strong>: c7i-flex.xlarge (101,658 req/sec)</li>
                        <li><strong>ìµœê³  Cold Start</strong>: c8g.xlarge (4.29ì´ˆ)</li>
                        <li><strong>ê· í˜• ì¡íŒ ì„ íƒ</strong>: c8i.xlarge, m8i.xlarge</li>
                        <li><strong>ë¹„ìš© íš¨ìœ¨</strong>: c8g.xlarge (Graviton4)</li>
                    </ul>
                </div>
                <div class="warning-box">
                    <h4>âš ï¸ ì£¼ì˜ì‚¬í•­</h4>
                    <ul>
                        <li><strong>c6in P99 Latency</strong>: 184msë¡œ ë§¤ìš° ë†’ìŒ - í”¼í•˜ì„¸ìš”</li>
                        <li><strong>5ì„¸ëŒ€ AMD</strong>: Cold Startê°€ 11ì´ˆëŒ€ - ì„œë²„ë¦¬ìŠ¤ì— ë¶€ì í•©</li>
                        <li><strong>Flex ì„ íƒ</strong>: ì›Œí¬ë¡œë“œ íŠ¹ì„±ì— ë”°ë¼ 7ì„¸ëŒ€/8ì„¸ëŒ€ ì„ íƒ</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>Spring Boot Benchmark Report | Generated: 2026-01-20 | Amazon EKS 1.34 + Karpenter 1.5.0</p>
            <p style="margin-top: 0.5rem;">wrk 4.2.0 | Spring Boot 4.0.1 | OpenJDK 21.0.9</p>
        </div>
    </div>

    <script>
        // ë°ì´í„° ì •ì˜
        const data = [
            {instance: 'c7i-flex.xlarge', arch: 'intel', gen: 7, family: 'C', rps50: 87512, rps100: 94639, rps200: 101658, lat50: 1.698, lat99: 4.59, cold: 5.08, price: 0.193, flex: true},
            {instance: 'm7i-flex.xlarge', arch: 'intel', gen: 7, family: 'M', rps50: 79660, rps100: 88417, rps200: 97607, lat50: 1.792, lat99: 5.018, cold: 5.35, price: 0.218, flex: true},
            {instance: 'm8i.xlarge', arch: 'intel', gen: 8, family: 'M', rps50: 62956, rps100: 81528, rps200: 94181, lat50: 1.892, lat99: 4.472, cold: 4.69, price: 0.254, flex: false},
            {instance: 'r8i.xlarge', arch: 'intel', gen: 8, family: 'R', rps50: 66755, rps100: 83159, rps200: 94115, lat50: 1.906, lat99: 4.364, cold: 4.80, price: 0.316, flex: false},
            {instance: 'c8i.xlarge', arch: 'intel', gen: 8, family: 'C', rps50: 63427, rps100: 81303, rps200: 93746, lat50: 1.922, lat99: 4.314, cold: 4.37, price: 0.212, flex: false},
            {instance: 'c8i-flex.xlarge', arch: 'intel', gen: 8, family: 'C', rps50: 61541, rps100: 80121, rps200: 91741, lat50: 1.96, lat99: 4.76, cold: 4.51, price: 0.2, flex: true},
            {instance: 'r8i-flex.xlarge', arch: 'intel', gen: 8, family: 'R', rps50: 62212, rps100: 80328, rps200: 91191, lat50: 2.008, lat99: 4.724, cold: 4.69, price: 0.294, flex: true},
            {instance: 'r8g.xlarge', arch: 'graviton', gen: 8, family: 'R', rps50: 59089, rps100: 69323, rps200: 76418, lat50: 2.418, lat99: 5.126, cold: 4.41, price: 0.229, flex: false},
            {instance: 'm7i.xlarge', arch: 'intel', gen: 7, family: 'M', rps50: 66739, rps100: 70009, rps200: 75740, lat50: 2.466, lat99: 5.3, cold: 5.85, price: 0.242, flex: false},
            {instance: 'c8g.xlarge', arch: 'graviton', gen: 8, family: 'C', rps50: 57258, rps100: 66933, rps200: 74291, lat50: 2.482, lat99: 5.392, cold: 4.29, price: 0.154, flex: false},
            {instance: 'r7i.xlarge', arch: 'intel', gen: 7, family: 'R', rps50: 58688, rps100: 66550, rps200: 73161, lat50: 2.542, lat99: 5.1, cold: 5.54, price: 0.301, flex: false},
            {instance: 'm8g.xlarge', arch: 'graviton', gen: 8, family: 'M', rps50: 58069, rps100: 65460, rps200: 70844, lat50: 2.608, lat99: 5.326, cold: 4.55, price: 0.185, flex: false},
            {instance: 'c7i.xlarge', arch: 'intel', gen: 7, family: 'C', rps50: 52806, rps100: 59534, rps200: 64948, lat50: 2.868, lat99: 5.786, cold: 5.66, price: 0.202, flex: false},
            {instance: 'm6idn.xlarge', arch: 'intel', gen: 6, family: 'M', rps50: 45538, rps100: 51826, rps200: 54657, lat50: 3.526, lat99: 6.388, cold: 6.06, price: 0.321, flex: false},
            {instance: 'r6i.xlarge', arch: 'intel', gen: 6, family: 'R', rps50: 48128, rps100: 50908, rps200: 53514, lat50: 3.632, lat99: 6.704, cold: 6.47, price: 0.286, flex: false},
            {instance: 'r6id.xlarge', arch: 'intel', gen: 6, family: 'R', rps50: 46063, rps100: 48598, rps200: 50303, lat50: 3.866, lat99: 7.108, cold: 6.29, price: 0.353, flex: false},
            {instance: 'c6id.xlarge', arch: 'intel', gen: 6, family: 'C', rps50: 46803, rps100: 44060, rps200: 49937, lat50: 3.566, lat99: 10.328, cold: 6.00, price: 0.242, flex: false},
            {instance: 'm6i.xlarge', arch: 'intel', gen: 6, family: 'M', rps50: 45606, rps100: 48442, rps200: 49723, lat50: 3.914, lat99: 7.15, cold: 6.27, price: 0.23, flex: false},
            {instance: 'c6in.xlarge', arch: 'intel', gen: 6, family: 'C', rps50: 46226, rps100: 47824, rps200: 49297, lat50: 3.608, lat99: 184.582, cold: 5.87, price: 0.254, flex: false},
            {instance: 'm6in.xlarge', arch: 'intel', gen: 6, family: 'M', rps50: 40555, rps100: 45696, rps200: 47149, lat50: 4.118, lat99: 7.454, cold: 6.80, price: 0.285, flex: false},
            {instance: 'r7gd.xlarge', arch: 'graviton', gen: 7, family: 'R', rps50: 38572, rps100: 42485, rps200: 47028, lat50: 3.998, lat99: 8.156, cold: 5.59, price: 0.287, flex: false},
            {instance: 'm6id.xlarge', arch: 'intel', gen: 6, family: 'M', rps50: 42870, rps100: 45379, rps200: 46857, lat50: 4.164, lat99: 7.666, cold: 6.53, price: 0.285, flex: false},
            {instance: 'r7g.xlarge', arch: 'graviton', gen: 7, family: 'R', rps50: 37933, rps100: 41906, rps200: 46742, lat50: 4.05, lat99: 8.048, cold: 5.63, price: 0.24, flex: false},
            {instance: 'c7g.xlarge', arch: 'graviton', gen: 7, family: 'C', rps50: 38164, rps100: 42077, rps200: 45840, lat50: 4.15, lat99: 8.274, cold: 5.75, price: 0.162, flex: false},
            {instance: 'm7g.xlarge', arch: 'graviton', gen: 7, family: 'M', rps50: 36947, rps100: 41038, rps200: 45772, lat50: 4.132, lat99: 8.322, cold: 5.94, price: 0.194, flex: false},
            {instance: 'm7gd.xlarge', arch: 'graviton', gen: 7, family: 'M', rps50: 38351, rps100: 41613, rps200: 45606, lat50: 4.202, lat99: 8.332, cold: 5.71, price: 0.231, flex: false},
            {instance: 'm5zn.xlarge', arch: 'intel', gen: 5, family: 'M', rps50: 41783, rps100: 43771, rps200: 45387, lat50: 4.292, lat99: 7.822, cold: 6.25, price: 0.331, flex: false},
            {instance: 'c6i.xlarge', arch: 'intel', gen: 6, family: 'C', rps50: 42040, rps100: 43182, rps200: 43917, lat50: 4.442, lat99: 8.708, cold: 6.30, price: 0.192, flex: false},
            {instance: 'c7gd.xlarge', arch: 'graviton', gen: 7, family: 'C', rps50: 36311, rps100: 39330, rps200: 42797, lat50: 4.478, lat99: 9.16, cold: 5.44, price: 0.193, flex: false},
            {instance: 'r5.xlarge', arch: 'intel', gen: 5, family: 'R', rps50: 33757, rps100: 35103, rps200: 36185, lat50: 5.386, lat99: 9.942, cold: 8.23, price: 0.286, flex: false},
            {instance: 'r5n.xlarge', arch: 'intel', gen: 5, family: 'R', rps50: 33805, rps100: 35487, rps200: 35883, lat50: 5.424, lat99: 9.914, cold: 7.87, price: 0.343, flex: false},
            {instance: 'r5d.xlarge', arch: 'intel', gen: 5, family: 'R', rps50: 33302, rps100: 34891, rps200: 35052, lat50: 5.552, lat99: 10.168, cold: 8.10, price: 0.329, flex: false},
            {instance: 'r5dn.xlarge', arch: 'intel', gen: 5, family: 'R', rps50: 32578, rps100: 33717, rps200: 34533, lat50: 5.662, lat99: 10.454, cold: 8.33, price: 0.377, flex: false},
            {instance: 'r5b.xlarge', arch: 'intel', gen: 5, family: 'R', rps50: 32365, rps100: 33557, rps200: 34461, lat50: 5.66, lat99: 10.572, cold: 7.97, price: 0.343, flex: false},
            {instance: 'm6g.xlarge', arch: 'graviton', gen: 6, family: 'M', rps50: 29014, rps100: 31898, rps200: 34293, lat50: 5.556, lat99: 11.234, cold: 7.55, price: 0.185, flex: false},
            {instance: 'm5.xlarge', arch: 'intel', gen: 5, family: 'M', rps50: 33465, rps100: 32932, rps200: 33345, lat50: 5.562, lat99: 14.634, cold: 7.45, price: 0.23, flex: false},
            {instance: 'm5d.xlarge', arch: 'intel', gen: 5, family: 'M', rps50: 32385, rps100: 31809, rps200: 33234, lat50: 5.802, lat99: 11.17, cold: 7.96, price: 0.261, flex: false},
            {instance: 'c6gd.xlarge', arch: 'graviton', gen: 6, family: 'C', rps50: 27701, rps100: 30312, rps200: 33005, lat50: 5.822, lat99: 11.604, cold: 7.73, price: 0.185, flex: false},
            {instance: 'c5n.xlarge', arch: 'intel', gen: 5, family: 'C', rps50: 30439, rps100: 33690, rps200: 32199, lat50: 5.97, lat99: 19.462, cold: 7.35, price: 0.242, flex: false},
            {instance: 'c5a.xlarge', arch: 'amd', gen: 5, family: 'C', rps50: 29655, rps100: 30832, rps200: 30856, lat50: 6.324, lat99: 11.56, cold: 6.96, price: 0.173, flex: false},
            {instance: 'm6gd.xlarge', arch: 'graviton', gen: 6, family: 'M', rps50: 26674, rps100: 28960, rps200: 30725, lat50: 6.274, lat99: 12.55, cold: 7.82, price: 0.22, flex: false},
            {instance: 'c6g.xlarge', arch: 'graviton', gen: 6, family: 'C', rps50: 26011, rps100: 28411, rps200: 30564, lat50: 6.332, lat99: 12.832, cold: 7.65, price: 0.154, flex: false},
            {instance: 'c6gn.xlarge', arch: 'graviton', gen: 6, family: 'C', rps50: 26002, rps100: 28383, rps200: 30359, lat50: 6.386, lat99: 12.712, cold: 7.18, price: 0.194, flex: false},
            {instance: 'c5.xlarge', arch: 'intel', gen: 5, family: 'C', rps50: 35256, rps100: 37299, rps200: 29877, lat50: 4.768, lat99: 9.028, cold: 7.14, price: 0.192, flex: false},
            {instance: 'r6g.xlarge', arch: 'graviton', gen: 6, family: 'R', rps50: 26298, rps100: 28093, rps200: 29783, lat50: 6.462, lat99: 13.18, cold: 7.69, price: 0.229, flex: false},
            {instance: 'r6gd.xlarge', arch: 'graviton', gen: 6, family: 'R', rps50: 25692, rps100: 27545, rps200: 29033, lat50: 6.62, lat99: 13.184, cold: 7.34, price: 0.264, flex: false},
            {instance: 'c5d.xlarge', arch: 'intel', gen: 5, family: 'C', rps50: 34602, rps100: 38132, rps200: 27012, lat50: 3.197, lat99: 8.824, cold: 7.19, price: 0.218, flex: false},
            {instance: 'r5ad.xlarge', arch: 'amd', gen: 5, family: 'R', rps50: 23799, rps100: 24411, rps200: 24329, lat50: 8.01, lat99: 14.832, cold: 10.96, price: 0.308, flex: false},
            {instance: 'r5a.xlarge', arch: 'amd', gen: 5, family: 'R', rps50: 22804, rps100: 22976, rps200: 22983, lat50: 8.5, lat99: 15.876, cold: 11.22, price: 0.257, flex: false},
            {instance: 'm5ad.xlarge', arch: 'amd', gen: 5, family: 'M', rps50: 22102, rps100: 22822, rps200: 22825, lat50: 8.446, lat99: 16.756, cold: 11.08, price: 0.247, flex: false},
            {instance: 'm5a.xlarge', arch: 'amd', gen: 5, family: 'M', rps50: 22092, rps100: 22364, rps200: 22443, lat50: 8.716, lat99: 16.518, cold: 11.48, price: 0.206, flex: false}
        ];

        const colors = {
            graviton: '#10b981',
            intel: '#3b82f6',
            amd: '#ef4444'
        };

        // Scenario tab switching
        function showScenario(scenario) {
            document.querySelectorAll('.scenario-content').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            document.getElementById('scenario-' + scenario).style.display = 'block';
            event.target.classList.add('active');
        }

        // Top 20 charts for each scenario
        function createTop20Chart(canvasId, rpsKey, title) {
            const sorted = [...data].sort((a, b) => b[rpsKey] - a[rpsKey]).slice(0, 20);
            new Chart(document.getElementById(canvasId), {
                type: 'bar',
                data: {
                    labels: sorted.map(d => d.instance),
                    datasets: [{
                        label: title,
                        data: sorted.map(d => d[rpsKey]),
                        backgroundColor: sorted.map(d => colors[d.arch]),
                        borderRadius: 4
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { x: { beginAtZero: true, title: { display: true, text: 'Requests/sec' } } }
                }
            });
        }

        createTop20Chart('wrkTop20Chart200', 'rps200', 'High Load (200 conn)');
        createTop20Chart('wrkTop20Chart100', 'rps100', 'Normal Load (100 conn)');
        createTop20Chart('wrkTop20Chart50', 'rps50', 'Light Load (50 conn)');

        // Scenario comparison chart (Top 10)
        const top10 = [...data].sort((a, b) => b.rps200 - a.rps200).slice(0, 10);
        new Chart(document.getElementById('scenarioCompareChart'), {
            type: 'bar',
            data: {
                labels: top10.map(d => d.instance),
                datasets: [
                    { label: '50 conn', data: top10.map(d => d.rps50), backgroundColor: 'rgba(59, 130, 246, 0.5)' },
                    { label: '100 conn', data: top10.map(d => d.rps100), backgroundColor: 'rgba(59, 130, 246, 0.75)' },
                    { label: '200 conn', data: top10.map(d => d.rps200), backgroundColor: 'rgba(59, 130, 246, 1)' }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { position: 'top' } },
                scales: { y: { beginAtZero: true, title: { display: true, text: 'Requests/sec' } } }
            }
        });

        // Generation by Architecture charts
        const genLabels = ['5ì„¸ëŒ€', '6ì„¸ëŒ€', '7ì„¸ëŒ€', '8ì„¸ëŒ€'];

        // Calculate generation averages
        function calcGenAvg(arch, gen, key) {
            const filtered = data.filter(d => d.arch === arch && d.gen === gen);
            if (filtered.length === 0) return null;
            return Math.round(filtered.reduce((sum, d) => sum + d[key], 0) / filtered.length);
        }

        const genRps200 = {
            intel: [5,6,7,8].map(g => calcGenAvg('intel', g, 'rps200')),
            amd: [5,6,7,8].map(g => calcGenAvg('amd', g, 'rps200')),
            graviton: [5,6,7,8].map(g => calcGenAvg('graviton', g, 'rps200'))
        };

        new Chart(document.getElementById('genArchWrkChart'), {
            type: 'bar',
            data: {
                labels: genLabels,
                datasets: [
                    { label: 'Intel', data: genRps200.intel, backgroundColor: 'rgba(59, 130, 246, 0.8)' },
                    { label: 'AMD', data: genRps200.amd, backgroundColor: 'rgba(239, 68, 68, 0.8)' },
                    { label: 'Graviton', data: genRps200.graviton, backgroundColor: 'rgba(16, 185, 129, 0.8)' }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { position: 'top' } },
                scales: { y: { beginAtZero: true, title: { display: true, text: 'Requests/sec (200 conn)' } } }
            }
        });

        // 100 conn chart
        const genRps100 = {
            intel: [5,6,7,8].map(g => calcGenAvg('intel', g, 'rps100')),
            amd: [5,6,7,8].map(g => calcGenAvg('amd', g, 'rps100')),
            graviton: [5,6,7,8].map(g => calcGenAvg('graviton', g, 'rps100'))
        };

        new Chart(document.getElementById('genArch100Chart'), {
            type: 'bar',
            data: {
                labels: genLabels,
                datasets: [
                    { label: 'Intel', data: genRps100.intel, backgroundColor: 'rgba(59, 130, 246, 0.8)' },
                    { label: 'AMD', data: genRps100.amd, backgroundColor: 'rgba(239, 68, 68, 0.8)' },
                    { label: 'Graviton', data: genRps100.graviton, backgroundColor: 'rgba(16, 185, 129, 0.8)' }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { position: 'top' } },
                scales: { y: { beginAtZero: true, title: { display: true, text: 'Requests/sec' } } }
            }
        });

        // 50 conn chart
        const genRps50 = {
            intel: [5,6,7,8].map(g => calcGenAvg('intel', g, 'rps50')),
            amd: [5,6,7,8].map(g => calcGenAvg('amd', g, 'rps50')),
            graviton: [5,6,7,8].map(g => calcGenAvg('graviton', g, 'rps50'))
        };

        new Chart(document.getElementById('genArch50Chart'), {
            type: 'bar',
            data: {
                labels: genLabels,
                datasets: [
                    { label: 'Intel', data: genRps50.intel, backgroundColor: 'rgba(59, 130, 246, 0.8)' },
                    { label: 'AMD', data: genRps50.amd, backgroundColor: 'rgba(239, 68, 68, 0.8)' },
                    { label: 'Graviton', data: genRps50.graviton, backgroundColor: 'rgba(16, 185, 129, 0.8)' }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { position: 'top' } },
                scales: { y: { beginAtZero: true, title: { display: true, text: 'Requests/sec' } } }
            }
        });

        // Latency P50 Chart
        const latP50Sorted = [...data].sort((a, b) => a.lat50 - b.lat50).slice(0, 15);
        new Chart(document.getElementById('latencyP50Chart'), {
            type: 'bar',
            data: {
                labels: latP50Sorted.map(d => d.instance),
                datasets: [{
                    label: 'P50 Latency (ms)',
                    data: latP50Sorted.map(d => d.lat50),
                    backgroundColor: latP50Sorted.map(d => colors[d.arch]),
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { x: { beginAtZero: true, title: { display: true, text: 'ms (ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ)' } } }
            }
        });

        // Latency P99 Chart (exclude c6in outlier for better visualization)
        const latP99Sorted = [...data].filter(d => d.lat99 < 50).sort((a, b) => a.lat99 - b.lat99).slice(0, 15);
        new Chart(document.getElementById('latencyP99Chart'), {
            type: 'bar',
            data: {
                labels: latP99Sorted.map(d => d.instance),
                datasets: [{
                    label: 'P99 Latency (ms)',
                    data: latP99Sorted.map(d => d.lat99),
                    backgroundColor: latP99Sorted.map(d => colors[d.arch]),
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { x: { beginAtZero: true, title: { display: true, text: 'ms (ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ)' } } }
            }
        });

        // Throughput vs Latency scatter
        new Chart(document.getElementById('throughputLatencyChart'), {
            type: 'bubble',
            data: {
                datasets: [
                    {
                        label: 'Intel',
                        data: data.filter(d => d.arch === 'intel' && d.lat99 < 50).map(d => ({x: d.rps200, y: d.lat50, r: Math.min(d.lat99, 20), instance: d.instance, lat99: d.lat99})),
                        backgroundColor: 'rgba(59, 130, 246, 0.6)'
                    },
                    {
                        label: 'AMD',
                        data: data.filter(d => d.arch === 'amd').map(d => ({x: d.rps200, y: d.lat50, r: Math.min(d.lat99, 20), instance: d.instance, lat99: d.lat99})),
                        backgroundColor: 'rgba(239, 68, 68, 0.6)'
                    },
                    {
                        label: 'Graviton',
                        data: data.filter(d => d.arch === 'graviton').map(d => ({x: d.rps200, y: d.lat50, r: Math.min(d.lat99, 20), instance: d.instance, lat99: d.lat99})),
                        backgroundColor: 'rgba(16, 185, 129, 0.6)'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top' },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const d = context.raw;
                                return d.instance + ': ' + d.x.toLocaleString() + ' req/s, P50: ' + d.y.toFixed(1) + 'ms, P99: ' + d.lat99.toFixed(1) + 'ms';
                            }
                        }
                    }
                },
                scales: {
                    x: { title: { display: true, text: 'Requests/sec (ë†’ì„ìˆ˜ë¡ ì¢‹ìŒ)' } },
                    y: { title: { display: true, text: 'P50 Latency ms (ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ)' } }
                }
            }
        });

        // Flex comparison charts
        new Chart(document.getElementById('flexWrkChart'), {
            type: 'bar',
            data: {
                labels: ['c7i', 'c7i-flex', 'c8i', 'c8i-flex'],
                datasets: [{
                    label: 'Requests/sec (200 conn)',
                    data: [64948, 101658, 93746, 91741],
                    backgroundColor: ['#3b82f6', '#60a5fa', '#3b82f6', '#fca5a5'],
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { y: { beginAtZero: true, title: { display: true, text: 'Requests/sec' } } }
            }
        });

        new Chart(document.getElementById('flexColdChart'), {
            type: 'bar',
            data: {
                labels: ['c7i', 'c7i-flex', 'c8i', 'c8i-flex'],
                datasets: [{
                    label: 'Cold Start (ì´ˆ)',
                    data: [5.66, 5.08, 4.37, 4.51],
                    backgroundColor: ['#3b82f6', '#60a5fa', '#3b82f6', '#60a5fa'],
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { y: { beginAtZero: true, title: { display: true, text: 'ì´ˆ (ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ)' } } }
            }
        });

        // Cold Start Top 20
        const coldSorted = [...data].filter(d => d.cold > 0).sort((a, b) => a.cold - b.cold).slice(0, 20);
        new Chart(document.getElementById('coldstartTop20Chart'), {
            type: 'bar',
            data: {
                labels: coldSorted.map(d => d.instance),
                datasets: [{
                    label: 'Cold Start (ì´ˆ)',
                    data: coldSorted.map(d => d.cold),
                    backgroundColor: coldSorted.map(d => colors[d.arch]),
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { x: { beginAtZero: true, title: { display: true, text: 'ì´ˆ (ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ)' } } }
            }
        });

        // Generation Cold Start by Arch
        const genCold = {
            intel: [5,6,7,8].map(g => {
                const filtered = data.filter(d => d.arch === 'intel' && d.gen === g && d.cold > 0);
                return filtered.length ? Math.round(filtered.reduce((sum, d) => sum + d.cold, 0) / filtered.length * 100) / 100 : null;
            }),
            amd: [5,6,7,8].map(g => {
                const filtered = data.filter(d => d.arch === 'amd' && d.gen === g && d.cold > 0);
                return filtered.length ? Math.round(filtered.reduce((sum, d) => sum + d.cold, 0) / filtered.length * 100) / 100 : null;
            }),
            graviton: [5,6,7,8].map(g => {
                const filtered = data.filter(d => d.arch === 'graviton' && d.gen === g && d.cold > 0);
                return filtered.length ? Math.round(filtered.reduce((sum, d) => sum + d.cold, 0) / filtered.length * 100) / 100 : null;
            })
        };

        new Chart(document.getElementById('genArchColdChart'), {
            type: 'bar',
            data: {
                labels: genLabels,
                datasets: [
                    { label: 'Intel', data: genCold.intel, backgroundColor: 'rgba(59, 130, 246, 0.8)' },
                    { label: 'AMD', data: genCold.amd, backgroundColor: 'rgba(239, 68, 68, 0.8)' },
                    { label: 'Graviton', data: genCold.graviton, backgroundColor: 'rgba(16, 185, 129, 0.8)' }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { position: 'top' } },
                scales: { y: { beginAtZero: true, title: { display: true, text: 'ì´ˆ (ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ)' } } }
            }
        });

        // Arch Cold Start
        const archColdData = {
            graviton: data.filter(d => d.arch === 'graviton' && d.cold > 0).reduce((a, b) => a + b.cold, 0) / data.filter(d => d.arch === 'graviton' && d.cold > 0).length,
            intel: data.filter(d => d.arch === 'intel' && d.cold > 0).reduce((a, b) => a + b.cold, 0) / data.filter(d => d.arch === 'intel' && d.cold > 0).length,
            amd: data.filter(d => d.arch === 'amd' && d.cold > 0).reduce((a, b) => a + b.cold, 0) / data.filter(d => d.arch === 'amd' && d.cold > 0).length
        };

        new Chart(document.getElementById('archColdChart'), {
            type: 'bar',
            data: {
                labels: ['Graviton', 'Intel', 'AMD'],
                datasets: [{
                    label: 'Cold Start í‰ê·  (ì´ˆ)',
                    data: [archColdData.graviton, archColdData.intel, archColdData.amd],
                    backgroundColor: [colors.graviton, colors.intel, colors.amd],
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { y: { beginAtZero: true } }
            }
        });

        // Results table
        function renderTable(filteredData) {
            const tbody = document.getElementById('resultsBody');
            tbody.innerHTML = '';

            filteredData.forEach(d => {
                const archBadge = `<span class="badge badge-${d.arch}">${d.arch}</span>`;
                const row = `
                    <tr>
                        <td><strong>${d.instance}</strong>${d.flex ? ' âš¡' : ''}</td>
                        <td>${archBadge}</td>
                        <td>${d.gen}ì„¸ëŒ€</td>
                        <td>${d.rps50.toLocaleString()}</td>
                        <td>${d.rps100.toLocaleString()}</td>
                        <td>${d.rps200.toLocaleString()}</td>
                        <td>${d.lat50.toFixed(2)}ms</td>
                        <td>${d.lat99 > 50 ? '<span style="color:red">' + d.lat99.toFixed(1) + 'ms</span>' : d.lat99.toFixed(2) + 'ms'}</td>
                        <td>${d.cold > 0 ? d.cold.toFixed(2) + 'ì´ˆ' : '-'}</td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        // Initial render
        renderTable(data.sort((a, b) => b.rps200 - a.rps200));

        // Filters
        document.getElementById('searchInput').addEventListener('input', applyFilters);
        document.getElementById('archFilter').addEventListener('change', applyFilters);
        document.getElementById('genFilter').addEventListener('change', applyFilters);
        document.getElementById('scenarioFilter').addEventListener('change', applyFilters);

        function applyFilters() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const arch = document.getElementById('archFilter').value;
            const gen = document.getElementById('genFilter').value;
            const scenario = document.getElementById('scenarioFilter').value;

            let filtered = data;
            if (search) filtered = filtered.filter(d => d.instance.toLowerCase().includes(search));
            if (arch) filtered = filtered.filter(d => d.arch === arch);
            if (gen) filtered = filtered.filter(d => d.gen === parseInt(gen));

            renderTable(filtered.sort((a, b) => b[scenario] - a[scenario]));
        }

        // Sort table
        let sortDir = 1;
        function sortTable(col) {
            sortDir *= -1;
            const sorted = [...data].sort((a, b) => {
                if (col === 0) return sortDir * a.instance.localeCompare(b.instance);
                if (col === 3) return sortDir * (a.rps50 - b.rps50);
                if (col === 4) return sortDir * (a.rps100 - b.rps100);
                if (col === 5) return sortDir * (a.rps200 - b.rps200);
                if (col === 6) return sortDir * (a.lat50 - b.lat50);
                if (col === 7) return sortDir * (a.lat99 - b.lat99);
                if (col === 8) return sortDir * (a.cold - b.cold);
                return 0;
            });
            renderTable(sorted);
        }
    </script>
</body>
</html>
