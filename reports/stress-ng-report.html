<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stress-ng 종합 벤치마크 리포트</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --graviton: #10b981;
            --intel: #3b82f6;
            --amd: #ef4444;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
            --muted: #64748b;
            --border: #e2e8f0;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }
        .container { max-width: 1600px; margin: 0 auto; padding: 2rem; }
        header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, #059669 0%, #10b981 50%, #34d399 100%);
            color: white;
            border-radius: 1rem;
        }
        header h1 { font-size: 2.5rem; margin-bottom: 0.5rem; }
        header p { opacity: 0.9; font-size: 1.1rem; }
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .card {
            background: var(--card);
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }
        .card h3 {
            color: var(--muted);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }
        .card .value { font-size: 1.4rem; font-weight: 700; color: var(--intel); }
        .card .label { font-size: 0.875rem; color: var(--muted); }
        .card.graviton .value { color: var(--graviton); }
        .chart-section {
            background: var(--card);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }
        .chart-section h2 { font-size: 1.25rem; margin-bottom: 0.25rem; }
        .chart-section .description { color: var(--muted); margin-bottom: 1rem; font-size: 0.875rem; }
        .chart-container { position: relative; height: 400px; }
        .chart-container.tall { height: 500px; }
        .chart-container.extra-tall { height: 600px; }
        .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; }
        .insights {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 4px solid #f59e0b;
            padding: 1rem;
            border-radius: 0 0.5rem 0.5rem 0;
            margin: 1rem 0;
            font-size: 0.9rem;
        }
        .insights h4 { color: #92400e; margin-bottom: 0.5rem; }
        .insights ul { margin-left: 1.5rem; color: #78350f; }
        table { width: 100%; border-collapse: collapse; margin-top: 1rem; font-size: 0.8rem; }
        th, td { padding: 0.4rem 0.5rem; text-align: left; border-bottom: 1px solid #e2e8f0; }
        th { background: #f1f5f9; font-weight: 600; cursor: pointer; }
        th:hover { background: #e2e8f0; }
        tr:hover { background: #f8fafc; }
        .badge {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            border-radius: 9999px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        .badge-graviton { background: #d1fae5; color: #065f46; }
        .badge-intel { background: #dbeafe; color: #1e40af; }
        .badge-amd { background: #fee2e2; color: #991b1b; }
        footer {
            text-align: center;
            padding: 2rem;
            color: var(--muted);
            font-size: 0.875rem;
        }
        .filter-bar {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        .filter-bar select, .filter-bar input {
            padding: 0.5rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            font-size: 0.875rem;
        }
        .tab-buttons {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        .tab-btn {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border);
            background: var(--card);
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 0.875rem;
            transition: all 0.2s;
        }
        .tab-btn:hover { background: #f1f5f9; }
        .tab-btn.active { background: var(--intel); color: white; border-color: var(--intel); }
        .tab-btn.active-green { background: var(--graviton); color: white; border-color: var(--graviton); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .nav { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 2rem; }
        .nav a { padding: 0.5rem 1rem; background: var(--card); border-radius: 0.5rem; text-decoration: none; color: var(--text); font-size: 0.875rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .nav a:hover { background: var(--border); }
        @media (max-width: 1200px) { .grid-2 { grid-template-columns: 1fr; } }
        @media (max-width: 900px) { .grid-3 { grid-template-columns: 1fr; } }
        /* Navbar Styles */
        .navbar {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 0.75rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        .navbar-container {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }
        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            color: #fff;
            font-weight: 600;
            font-size: 1.1rem;
        }
        .navbar-brand:hover { color: #10b981; }
        .navbar-links {
            display: flex;
            gap: 0.25rem;
            flex-wrap: wrap;
            align-items: center;
        }
        .navbar-links a {
            color: #9ca3af;
            text-decoration: none;
            padding: 0.4rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.85rem;
            transition: all 0.2s;
        }
        .navbar-links a:hover {
            background: rgba(255,255,255,0.1);
            color: #fff;
        }
        .navbar-links a.active {
            background: rgba(99, 102, 241, 0.3);
            color: #a5b4fc;
        }
        @media (max-width: 768px) {
            .navbar { padding: 0.5rem 1rem; }
            .navbar-links a { padding: 0.3rem 0.5rem; font-size: 0.75rem; }
        }
    </style>
</head>
<body>
<nav class="navbar">
    <div class="navbar-container">
        <a href="../index.html" class="navbar-brand">EC2 Benchmark</a>
        <div class="navbar-links"><a href="geekbench-report.html">Geekbench</a><a href="passmark-report.html">PassMark</a><a href="sysbench-report.html">Sysbench</a><a href="stress-ng-report.html" class="active">stress-ng</a><a href="iperf3-report.html">iperf3</a><a href="redis-report.html">Redis</a><a href="nginx-report.html">Nginx</a><a href="springboot-report.html">SpringBoot</a><a href="elasticsearch-report.html">Elasticsearch</a></div>    </div></nav>
    <div class="container">
        <header>
            <h1>Stress-ng 종합 벤치마크</h1>
            <p>AWS EC2 인스턴스 51종 CPU/메모리/컨텍스트 스위칭 성능 비교 (5세대 ~ 8세대)</p>
            <p style="opacity: 0.7; margin-top: 0.5rem;">2026년 01월 | 서울 리전 (ap-northeast-2) | 4 vCPU xlarge</p>
        </header>

        <div class="summary-cards">
            <div class="card">
                <h3>종합 점수 최고</h3>
                <div class="value">472,629</div>
                <div class="label">r8g.xlarge</div>
            </div>
            <div class="card graviton">
                <h3>Matrix 최고</h3>
                <div class="value">21,897</div>
                <div class="label">c8g.xlarge ops/s</div>
            </div>
            <div class="card">
                <h3>CPU Int 최고</h3>
                <div class="value">526,352</div>
                <div class="label">m8g.xlarge ops/s</div>
            </div>
            <div class="card graviton">
                <h3>최고 가성비</h3>
                <div class="value">c8g.xlarge</div>
                <div class="label">3,037 점/$</div>
            </div>
            <div class="card">
                <h3>Graviton 평균</h3>
                <div class="value">348,161</div>
                <div class="label">종합 점수 (16개)</div>
            </div>
            <div class="card">
                <h3>Intel 평균</h3>
                <div class="value">247,144</div>
                <div class="label">종합 점수 (30개)</div>
            </div>
        </div>

        <nav class="nav">
            <a href="#cpu-perf">CPU 성능</a>
            <a href="#memory-perf">메모리 성능</a>
            <a href="#system-perf">시스템 성능</a>
            <a href="#price-perf">가격 대비 성능</a>
            <a href="#gen-compare">세대별 비교</a>
            <a href="#full-results">전체 결과</a>
        </nav>

        <div class="insights">
            <h4>핵심 인사이트</h4>
            <ul>
                <li><strong>종합 성능</strong>: r8g.xlarge가 종합 점수 472,629으로 1위 (Graviton 8세대)</li>
                <li><strong>가성비</strong>: c8g.xlarge가 $0.154/hr로 가격 대비 성능 최고 (3,037 점/$)</li>
                <li><strong>아키텍처 비교</strong>: Graviton 평균 348,161 vs Intel 247,144 (41% 우위)</li>
                <li><strong>세대별 향상</strong>: 8세대가 5세대 대비 평균 2.5배 성능 향상</li>
            </ul>
        </div>

        <!-- CPU 성능 섹션 -->
        <div class="chart-section" id="cpu-perf">
            <h2>CPU 성능 분석</h2>
            <p class="description">Integer, Float, Matrix 연산 성능을 선택하여 비교</p>

            <div class="tab-buttons">
                <button class="tab-btn active" onclick="showCpuTab('integer')">Integer 연산</button>
                <button class="tab-btn" onclick="showCpuTab('float')">Float 연산</button>
                <button class="tab-btn" onclick="showCpuTab('matrix')">Matrix 연산</button>
            </div>

            <div id="cpu-integer" class="tab-content active">
                <div class="chart-container tall">
                    <canvas id="cpuIntChart"></canvas>
                </div>
                <div class="insights" style="margin-top: 1rem;">
                    <h4>Integer 연산 인사이트</h4>
                    <ul>
                        <li><strong>Graviton4 압도적</strong>: m8g/r8g/c8g가 526K ops/s로 Top 3 독점</li>
                        <li><strong>Intel 8세대</strong>: 376K ops/s로 Graviton4 대비 71% 수준</li>
                        <li><strong>세대 간 격차</strong>: 8세대 Intel이 6세대 대비 39% 향상</li>
                    </ul>
                </div>
            </div>

            <div id="cpu-float" class="tab-content">
                <div class="chart-container tall">
                    <canvas id="cpuFloatChart"></canvas>
                </div>
                <div class="insights" style="margin-top: 1rem;">
                    <h4>Float 연산 인사이트</h4>
                    <ul>
                        <li><strong>Graviton4 최고</strong>: c8g/m8g/r8g가 54K ops/s로 동일 성능</li>
                        <li><strong>Intel 8세대</strong>: 48K ops/s로 Graviton4 대비 89% 수준</li>
                        <li><strong>AMD 5세대</strong>: c5a가 33K로 Intel 5세대보다 우수</li>
                    </ul>
                </div>
            </div>

            <div id="cpu-matrix" class="tab-content">
                <div class="chart-container tall">
                    <canvas id="matrixChart"></canvas>
                </div>
                <div class="insights" style="margin-top: 1rem;">
                    <h4>Matrix 연산 인사이트</h4>
                    <ul>
                        <li><strong>행렬 연산 최적화</strong>: Graviton이 NEON SIMD로 압도적 우위</li>
                        <li><strong>8세대 Graviton</strong>: 21.9K ops/s (7세대 18.5K 대비 18% 향상)</li>
                        <li><strong>Intel 최고</strong>: c8i가 12.1K로 Graviton의 55% 수준</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 메모리 성능 섹션 -->
        <div class="chart-section" id="memory-perf">
            <h2>메모리 성능 분석</h2>
            <p class="description">Memcpy (메모리 복사) 및 Cache 성능</p>

            <div class="tab-buttons">
                <button class="tab-btn active-green active" onclick="showMemTab('memcpy')">Memcpy</button>
                <button class="tab-btn" onclick="showMemTab('cache')">Cache</button>
            </div>

            <div id="mem-memcpy" class="tab-content active">
                <div class="chart-container tall">
                    <canvas id="memcpyChart"></canvas>
                </div>
                <div class="insights" style="margin-top: 1rem;">
                    <h4>Memcpy 인사이트</h4>
                    <ul>
                        <li><strong>메모리 대역폭</strong>: r8g.xlarge가 1,808 ops/s로 최고</li>
                        <li><strong>Graviton 우위</strong>: 8세대 Graviton이 1,780-1,808 범위로 최상위권</li>
                        <li><strong>Intel 8세대</strong>: 1,165 ops/s로 Graviton 대비 65% 수준</li>
                    </ul>
                </div>
            </div>

            <div id="mem-cache" class="tab-content">
                <div class="chart-container tall">
                    <canvas id="cacheChart"></canvas>
                </div>
                <div class="insights" style="margin-top: 1rem;">
                    <h4>Cache 인사이트</h4>
                    <ul>
                        <li><strong>캐시 효율성</strong>: m5zn.xlarge가 36 ops/s로 의외의 강세</li>
                        <li><strong>세대별 차이 미미</strong>: 캐시 성능은 아키텍처보다 캐시 크기에 의존</li>
                        <li><strong>5세대 강세</strong>: c5.xlarge 33 ops/s로 상위권</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 시스템 성능 섹션 -->
        <div class="chart-section" id="system-perf">
            <h2>시스템 성능 분석</h2>
            <p class="description">Context Switch 및 Branch Prediction 성능</p>

            <div class="tab-buttons">
                <button class="tab-btn active" onclick="showSysTab('switch')">Context Switch</button>
                <button class="tab-btn" onclick="showSysTab('branch')">Branch Prediction</button>
            </div>

            <div id="sys-switch" class="tab-content active">
                <div class="chart-container tall">
                    <canvas id="switchChart"></canvas>
                </div>
                <div class="insights" style="margin-top: 1rem;">
                    <h4>Context Switch 인사이트</h4>
                    <ul>
                        <li><strong>8세대 압도적</strong>: Graviton4가 1.9M ops/s로 최고 (프로세스 스케줄링 최적화)</li>
                        <li><strong>Intel 8세대</strong>: 1.59M ops/s로 Graviton4 대비 84%</li>
                        <li><strong>7세대 격차</strong>: Graviton3 1.32M vs Intel7 1.2M (10% 차이)</li>
                    </ul>
                </div>
            </div>

            <div id="sys-branch" class="tab-content">
                <div class="chart-container tall">
                    <canvas id="branchChart"></canvas>
                </div>
                <div class="insights" style="margin-top: 1rem;">
                    <h4>Branch Prediction 인사이트</h4>
                    <ul>
                        <li><strong>분기 예측 효율</strong>: Graviton4가 618K ops/s로 최고</li>
                        <li><strong>세대별 향상</strong>: Graviton 6→7→8세대 약 13% 향상</li>
                        <li><strong>Intel 8세대</strong>: 384K ops/s로 Graviton의 62% 수준</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 가격 대비 성능 섹션 -->
        <div class="chart-section" id="price-perf">
            <h2>가격 대비 성능 (Cost Efficiency)</h2>
            <p class="description">시간당 비용 대비 종합 점수 - 버블 크기는 종합 점수</p>

            <div class="tab-buttons">
                <button class="tab-btn active" onclick="showPriceTab('bubble')">버블 차트</button>
                <button class="tab-btn" onclick="showPriceTab('efficiency')">가성비 순위</button>
                <button class="tab-btn" onclick="showPriceTab('cpueff')">CPU별 가성비</button>
            </div>

            <div id="price-bubble" class="tab-content active">
                <div class="chart-container extra-tall">
                    <canvas id="pricePerfChart"></canvas>
                </div>
            </div>

            <div id="price-efficiency" class="tab-content">
                <div class="chart-container tall">
                    <canvas id="efficiencyChart"></canvas>
                </div>
            </div>

            <div id="price-cpueff" class="tab-content">
                <div class="grid-3">
                    <div class="chart-container">
                        <canvas id="intEffChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <canvas id="floatEffChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <canvas id="matrixEffChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="insights" style="margin-top: 1rem;">
                <h4>가성비 인사이트</h4>
                <ul>
                    <li><strong>최고 가성비</strong>: c8g.xlarge (3,037 점/$) - 저렴한 가격 + 높은 성능</li>
                    <li><strong>Graviton 전체 우위</strong>: 상위 10개 중 8개가 Graviton</li>
                    <li><strong>Intel 가성비</strong>: c8i-flex.xlarge가 Intel 중 최고 (1,708 점/$)</li>
                    <li><strong>피해야 할 인스턴스</strong>: 5세대 AMD는 가격 대비 성능이 가장 낮음</li>
                </ul>
            </div>
        </div>

        <!-- 세대별 비교 -->
        <div class="chart-section" id="gen-compare">
            <h2>아키텍처별 세대별 성능 비교</h2>
            <p class="description">Intel (5-8세대), AMD (5세대), Graviton (6-8세대) - 최대 2개 메트릭 동시 비교</p>

            <!-- 메트릭 선택 체크박스 -->
            <div style="display: flex; flex-wrap: wrap; gap: 0.75rem; margin-bottom: 1.5rem; padding: 1rem; background: #f8fafc; border-radius: 0.5rem;">
                <span style="font-weight: 600; margin-right: 0.5rem;">메트릭 선택 (최대 2개):</span>
                <label style="display: flex; align-items: center; gap: 0.25rem; cursor: pointer;">
                    <input type="checkbox" id="chk-matrix" class="metric-chk" value="matrix" checked onchange="updateCombinedChart()">
                    <span style="background: #3b82f6; color: white; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.8rem;">Matrix</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.25rem; cursor: pointer;">
                    <input type="checkbox" id="chk-float" class="metric-chk" value="float" onchange="updateCombinedChart()">
                    <span style="background: #8b5cf6; color: white; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.8rem;">Float</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.25rem; cursor: pointer;">
                    <input type="checkbox" id="chk-int" class="metric-chk" value="int" onchange="updateCombinedChart()">
                    <span style="background: #06b6d4; color: white; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.8rem;">CPU Int</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.25rem; cursor: pointer;">
                    <input type="checkbox" id="chk-memcpy" class="metric-chk" value="memcpy" checked onchange="updateCombinedChart()">
                    <span style="background: #f59e0b; color: white; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.8rem;">Memory</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.25rem; cursor: pointer;">
                    <input type="checkbox" id="chk-cache" class="metric-chk" value="cache" onchange="updateCombinedChart()">
                    <span style="background: #ec4899; color: white; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.8rem;">Cache</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.25rem; cursor: pointer;">
                    <input type="checkbox" id="chk-switch" class="metric-chk" value="switch" onchange="updateCombinedChart()">
                    <span style="background: #14b8a6; color: white; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.8rem;">Context Switch</span>
                </label>
                <label style="display: flex; align-items: center; gap: 0.25rem; cursor: pointer;">
                    <input type="checkbox" id="chk-branch" class="metric-chk" value="branch" onchange="updateCombinedChart()">
                    <span style="background: #64748b; color: white; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.8rem;">Branch</span>
                </label>
            </div>

            <div class="chart-container" style="height: 500px;">
                <canvas id="archGenCombinedChart"></canvas>
            </div>
            <div class="insights" style="margin-top: 1rem;">
                <h4>세대별 성능 향상률</h4>
                <ul>
                    <li><strong>Matrix Intel</strong>: 5세대 6.7K → 8세대 12.0K (+79% 향상)</li>
                    <li><strong>Matrix Graviton</strong>: 6세대 14.7K → 8세대 21.8K (+48% 향상)</li>
                    <li><strong>8세대 비교</strong>: Matrix - Graviton 21.8K vs Intel 12.0K (Graviton +82%)</li>
                </ul>
            </div>
            <h3 style="margin-top: 2rem;">메트릭별 세부 비교</h3>
            <div style="margin-bottom: 1rem;">
                <label for="metricSelector" style="font-weight: 600; margin-right: 0.5rem;">단일 메트릭 선택:</label>
                <select id="metricSelector" onchange="updateArchGenChart()" style="padding: 0.5rem 1rem; border-radius: 0.5rem; border: 1px solid #e2e8f0; font-size: 1rem;">
                    <option value="matrix">Matrix (행렬 연산)</option>
                    <option value="float">Float (부동소수점)</option>
                    <option value="int">CPU Int (정수 연산)</option>
                    <option value="memcpy">Memory (메모리 복사)</option>
                    <option value="cache">Cache</option>
                    <option value="switch">Context Switch</option>
                    <option value="branch">Branch Prediction</option>
                </select>
            </div>
            <div class="chart-container" style="height: 400px;">
                <canvas id="archChart"></canvas>
            </div>
        </div>

        <div class="chart-section">
            <h2>세대별 성능 추이 (아키텍처별)</h2>
            <p class="description">Graviton vs Intel vs AMD 세대별 종합 점수 변화</p>
            <div class="chart-container">
                <canvas id="genChart"></canvas>
            </div>
        </div>

        <!-- 가성비 Top 20 -->
        <div class="chart-section" id="cost-efficiency">
            <h2>가성비 Top 20 (효율성 점수)</h2>
            <p class="description">효율성 = 종합점수 / ($/hr × 1000) | 높을수록 좋음</p>
            <div class="chart-container tall">
                <canvas id="costEffTop20Chart"></canvas>
            </div>
            <div class="insights" style="margin-top: 1rem;">
                <h4>가성비 핵심 인사이트</h4>
                <ul>
                    <li><strong>Graviton4 압도적</strong>: c8g.xlarge가 $0.154/hr로 가성비 1위 (3,037 점/$)</li>
                    <li><strong>상위 독점</strong>: Top 10 중 8개가 Graviton - ARM 아키텍처의 효율성 입증</li>
                    <li><strong>Intel 최선</strong>: c8i-flex.xlarge가 Intel 중 가성비 최고 (1,708 점/$)</li>
                    <li><strong>세대 효과</strong>: 같은 가격대에서 신세대가 구세대 대비 20-40% 효율적</li>
                </ul>
            </div>
        </div>

        <!-- 전체 결과 테이블 -->
        <div class="chart-section" id="full-results">
            <h2>전체 결과 테이블</h2>
            <div class="filter-bar">
                <input type="text" id="searchInput" placeholder="인스턴스 검색..." onkeyup="filterTable()">
                <select id="archFilter" onchange="filterTable()">
                    <option value="">모든 아키텍처</option>
                    <option value="Graviton">Graviton</option>
                    <option value="Intel">Intel</option>
                    <option value="AMD">AMD</option>
                </select>
                <select id="genFilter" onchange="filterTable()">
                    <option value="">모든 세대</option>
                    <option value="8">8세대</option>
                    <option value="7">7세대</option>
                    <option value="6">6세대</option>
                    <option value="5">5세대</option>
                </select>
            </div>
            <table id="resultsTable">
                <thead>
                    <tr>
                        <th onclick="sortTable(0)">#</th>
                        <th onclick="sortTable(1)">인스턴스</th>
                        <th onclick="sortTable(2)">Arch</th>
                        <th onclick="sortTable(3)">Gen</th>
                        <th onclick="sortTable(4)">$/hr</th>
                        <th onclick="sortTable(5)">Matrix</th>
                        <th onclick="sortTable(6)">Float</th>
                        <th onclick="sortTable(7)">Int</th>
                        <th onclick="sortTable(8)">Memcpy</th>
                        <th onclick="sortTable(9)">Switch</th>
                        <th onclick="sortTable(10)">종합</th>
                        <th onclick="sortTable(11)">가성비</th>
                    </tr>
                </thead>
                <tbody id="resultsBody">
                </tbody>
            </table>
        </div>

        <footer>
            <p>Generated: 2026-01-21 | Benchmark: stress-ng (matrix, cpu, memcpy, cache, switch, branch)</p>
        </footer>
    </div>

    <script>
        // 전체 데이터 (가격 포함)
        const data = [
            {instance: 'r8g.xlarge', arch: 'Graviton', gen: 8, family: 'R', price: 0.229, matrix: 21623, float: 54203, int: 526122, memcpy: 1808, cache: 22, switch: 1934407, branch: 618000, total: 472629},
            {instance: 'm8g.xlarge', arch: 'Graviton', gen: 8, family: 'M', price: 0.185, matrix: 21888, float: 54216, int: 526352, memcpy: 1804, cache: 22, switch: 1924708, branch: 618000, total: 471227},
            {instance: 'c8g.xlarge', arch: 'Graviton', gen: 8, family: 'C', price: 0.154, matrix: 21897, float: 54227, int: 526031, memcpy: 1779, cache: 22, switch: 1900854, branch: 618000, total: 467597},
            {instance: 'm8i.xlarge', arch: 'Intel', gen: 8, family: 'M', price: 0.254, matrix: 11938, float: 48225, int: 376627, memcpy: 1165, cache: 24, switch: 1596099, branch: 384000, total: 365376},
            {instance: 'c8i.xlarge', arch: 'Intel', gen: 8, family: 'C', price: 0.212, matrix: 12117, float: 48157, int: 376175, memcpy: 1165, cache: 24, switch: 1594655, branch: 384000, total: 365054},
            {instance: 'r8i.xlarge', arch: 'Intel', gen: 8, family: 'R', price: 0.316, matrix: 11930, float: 48064, int: 376166, memcpy: 1174, cache: 24, switch: 1591272, branch: 383000, total: 364421},
            {instance: 'r8i-flex.xlarge', arch: 'Intel', gen: 8, family: 'R', price: 0.294, matrix: 11883, float: 48235, int: 376301, memcpy: 1174, cache: 24, switch: 1577812, branch: 384000, total: 362580},
            {instance: 'r7g.xlarge', arch: 'Graviton', gen: 7, family: 'R', price: 0.240, matrix: 18558, float: 47908, int: 424900, memcpy: 1689, cache: 20, switch: 1327950, branch: 545000, total: 352228},
            {instance: 'c7g.xlarge', arch: 'Graviton', gen: 7, family: 'C', price: 0.162, matrix: 18520, float: 47947, int: 424860, memcpy: 1684, cache: 20, switch: 1325654, branch: 545000, total: 351826},
            {instance: 'm7gd.xlarge', arch: 'Graviton', gen: 7, family: 'M', price: 0.231, matrix: 18848, float: 47969, int: 425542, memcpy: 1691, cache: 20, switch: 1322073, branch: 546000, total: 351587},
            {instance: 'c7gd.xlarge', arch: 'Graviton', gen: 7, family: 'C', price: 0.193, matrix: 18540, float: 47972, int: 425090, memcpy: 1694, cache: 20, switch: 1313500, branch: 545000, total: 350183},
            {instance: 'r7gd.xlarge', arch: 'Graviton', gen: 7, family: 'R', price: 0.287, matrix: 18551, float: 47952, int: 425202, memcpy: 1691, cache: 20, switch: 1306008, branch: 545000, total: 349062},
            {instance: 'm7g.xlarge', arch: 'Graviton', gen: 7, family: 'M', price: 0.194, matrix: 18539, float: 47921, int: 424569, memcpy: 1692, cache: 20, switch: 1304380, branch: 545000, total: 348651},
            {instance: 'c8i-flex.xlarge', arch: 'Intel', gen: 8, family: 'C', price: 0.200, matrix: 11121, float: 46123, int: 360869, memcpy: 1148, cache: 23, switch: 1472594, branch: 360000, total: 341633},
            {instance: 'r7i.xlarge', arch: 'Intel', gen: 7, family: 'R', price: 0.301, matrix: 10563, float: 43576, int: 348569, memcpy: 896, cache: 21, switch: 1228865, branch: 340000, total: 299985},
            {instance: 'm7i.xlarge', arch: 'Intel', gen: 7, family: 'M', price: 0.242, matrix: 10310, float: 42796, int: 342444, memcpy: 881, cache: 21, switch: 1205695, branch: 335000, total: 294275},
            {instance: 'r6g.xlarge', arch: 'Graviton', gen: 6, family: 'R', price: 0.229, matrix: 14481, float: 38368, int: 307324, memcpy: 825, cache: 18, switch: 1129720, branch: 480000, total: 293992},
            {instance: 'm6gd.xlarge', arch: 'Graviton', gen: 6, family: 'M', price: 0.220, matrix: 14502, float: 38380, int: 307556, memcpy: 822, cache: 18, switch: 1128972, branch: 480000, total: 293925},
            {instance: 'c6g.xlarge', arch: 'Graviton', gen: 6, family: 'C', price: 0.154, matrix: 15605, float: 38429, int: 307500, memcpy: 831, cache: 18, switch: 1127102, branch: 480000, total: 293878},
            {instance: 'm6g.xlarge', arch: 'Graviton', gen: 6, family: 'M', price: 0.185, matrix: 14504, float: 38380, int: 307060, memcpy: 827, cache: 18, switch: 1128568, branch: 480000, total: 293749},
            {instance: 'r6gd.xlarge', arch: 'Graviton', gen: 6, family: 'R', price: 0.264, matrix: 14486, float: 38398, int: 307306, memcpy: 830, cache: 18, switch: 1126844, branch: 480000, total: 293568},
            {instance: 'c6gn.xlarge', arch: 'Graviton', gen: 6, family: 'C', price: 0.194, matrix: 14528, float: 38406, int: 307422, memcpy: 829, cache: 18, switch: 1126266, branch: 480000, total: 293498},
            {instance: 'c6gd.xlarge', arch: 'Graviton', gen: 6, family: 'C', price: 0.185, matrix: 14554, float: 38392, int: 307426, memcpy: 831, cache: 18, switch: 1123042, branch: 480000, total: 292972},
            {instance: 'c7i-flex.xlarge', arch: 'Intel', gen: 7, family: 'C', price: 0.193, matrix: 10706, float: 41609, int: 332560, memcpy: 855, cache: 21, switch: 1200025, branch: 328000, total: 290549},
            {instance: 'c7i.xlarge', arch: 'Intel', gen: 7, family: 'C', price: 0.202, matrix: 10183, float: 42188, int: 337573, memcpy: 869, cache: 21, switch: 1187277, branch: 330000, total: 290139},
            {instance: 'm7i-flex.xlarge', arch: 'Intel', gen: 7, family: 'M', price: 0.218, matrix: 10005, float: 39932, int: 321396, memcpy: 826, cache: 20, switch: 1174872, branch: 315000, total: 282635},
            {instance: 'm5zn.xlarge', arch: 'Intel', gen: 5, family: 'M', price: 0.331, matrix: 9900, float: 39832, int: 353597, memcpy: 1082, cache: 36, switch: 853362, branch: 310000, total: 258715},
            {instance: 'r6i.xlarge', arch: 'Intel', gen: 6, family: 'R', price: 0.286, matrix: 9312, float: 34049, int: 270550, memcpy: 813, cache: 19, switch: 944674, branch: 265000, total: 240252},
            {instance: 'c6in.xlarge', arch: 'Intel', gen: 6, family: 'C', price: 0.254, matrix: 9386, float: 34108, int: 270379, memcpy: 818, cache: 19, switch: 944421, branch: 265000, total: 240117},
            {instance: 'c6id.xlarge', arch: 'Intel', gen: 6, family: 'C', price: 0.242, matrix: 9362, float: 33958, int: 270467, memcpy: 810, cache: 19, switch: 942775, branch: 264000, total: 239871},
            {instance: 'm6idn.xlarge', arch: 'Intel', gen: 6, family: 'M', price: 0.321, matrix: 9499, float: 33723, int: 270457, memcpy: 816, cache: 19, switch: 942500, branch: 264000, total: 239838},
            {instance: 'c6i.xlarge', arch: 'Intel', gen: 6, family: 'C', price: 0.192, matrix: 9510, float: 34013, int: 269906, memcpy: 818, cache: 19, switch: 941357, branch: 264000, total: 239561},
            {instance: 'r6id.xlarge', arch: 'Intel', gen: 6, family: 'R', price: 0.353, matrix: 9104, float: 33896, int: 270348, memcpy: 819, cache: 19, switch: 939462, branch: 264000, total: 239110},
            {instance: 'm6in.xlarge', arch: 'Intel', gen: 6, family: 'M', price: 0.285, matrix: 8898, float: 33946, int: 270074, memcpy: 814, cache: 19, switch: 939138, branch: 264000, total: 239009},
            {instance: 'm6i.xlarge', arch: 'Intel', gen: 6, family: 'M', price: 0.230, matrix: 8947, float: 33558, int: 269460, memcpy: 812, cache: 19, switch: 934409, branch: 263000, total: 237951},
            {instance: 'm6id.xlarge', arch: 'Intel', gen: 6, family: 'M', price: 0.285, matrix: 9266, float: 33780, int: 270002, memcpy: 815, cache: 19, switch: 934281, branch: 264000, total: 237944},
            {instance: 'c5.xlarge', arch: 'Intel', gen: 5, family: 'C', price: 0.192, matrix: 8188, float: 31978, int: 179811, memcpy: 914, cache: 33, switch: 688242, branch: 210000, total: 187771},
            {instance: 'r5dn.xlarge', arch: 'Intel', gen: 5, family: 'R', price: 0.377, matrix: 7404, float: 28110, int: 249193, memcpy: 811, cache: 17, switch: 605465, branch: 205000, total: 182996},
            {instance: 'r5b.xlarge', arch: 'Intel', gen: 5, family: 'R', price: 0.343, matrix: 7301, float: 27878, int: 248935, memcpy: 806, cache: 17, switch: 604729, branch: 204000, total: 182787},
            {instance: 'c5d.xlarge', arch: 'Intel', gen: 5, family: 'C', price: 0.218, matrix: 8057, float: 30837, int: 172308, memcpy: 880, cache: 32, switch: 661917, branch: 200000, total: 180098},
            {instance: 'r5n.xlarge', arch: 'Intel', gen: 5, family: 'R', price: 0.343, matrix: 6817, float: 27412, int: 243600, memcpy: 796, cache: 17, switch: 596126, branch: 200000, total: 179325},
            {instance: 'c5n.xlarge', arch: 'Intel', gen: 5, family: 'C', price: 0.242, matrix: 7982, float: 29867, int: 168358, memcpy: 863, cache: 31, switch: 657357, branch: 195000, total: 177529},
            {instance: 'c5a.xlarge', arch: 'AMD', gen: 5, family: 'C', price: 0.173, matrix: 7808, float: 33105, int: 269010, memcpy: 993, cache: 25, switch: 446425, branch: 250000, total: 168249},
            {instance: 'r5d.xlarge', arch: 'Intel', gen: 5, family: 'R', price: 0.329, matrix: 7584, float: 28527, int: 159527, memcpy: 818, cache: 17, switch: 612349, branch: 190000, total: 166245},
            {instance: 'm5d.xlarge', arch: 'Intel', gen: 5, family: 'M', price: 0.261, matrix: 7121, float: 28061, int: 156542, memcpy: 809, cache: 17, switch: 606007, branch: 185000, total: 164258},
            {instance: 'r5.xlarge', arch: 'Intel', gen: 5, family: 'R', price: 0.286, matrix: 6710, float: 26737, int: 154787, memcpy: 800, cache: 17, switch: 599035, branch: 180000, total: 162156},
            {instance: 'm5.xlarge', arch: 'Intel', gen: 5, family: 'M', price: 0.230, matrix: 6886, float: 27166, int: 154349, memcpy: 805, cache: 17, switch: 597952, branch: 180000, total: 162124},
            {instance: 'm5a.xlarge', arch: 'AMD', gen: 5, family: 'M', price: 0.206, matrix: 6256, float: 22866, int: 188694, memcpy: 771, cache: 16, switch: 352132, branch: 175000, total: 126499},
            {instance: 'r5a.xlarge', arch: 'AMD', gen: 5, family: 'R', price: 0.257, matrix: 6586, float: 22717, int: 188084, memcpy: 765, cache: 16, switch: 346569, branch: 172000, total: 125441},
            {instance: 'r5ad.xlarge', arch: 'AMD', gen: 5, family: 'R', price: 0.308, matrix: 6430, float: 22933, int: 188923, memcpy: 775, cache: 16, switch: 349629, branch: 173000, total: 125299},
            {instance: 'm5ad.xlarge', arch: 'AMD', gen: 5, family: 'M', price: 0.247, matrix: 6478, float: 22744, int: 188634, memcpy: 772, cache: 16, switch: 343029, branch: 170000, total: 124374}
        ];

        // 가성비 계산
        data.forEach(d => {
            d.efficiency = Math.round(d.total / d.price);
            d.intEff = Math.round(d.int / d.price);
            d.floatEff = Math.round(d.float / d.price);
            d.matrixEff = Math.round(d.matrix / d.price);
        });

        const colors = { Graviton: '#10b981', Intel: '#3b82f6', AMD: '#ef4444' };

        // CPU 탭 전환
        function showCpuTab(type) {
            document.querySelectorAll('#cpu-perf .tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('#cpu-perf .tab-btn').forEach(el => el.classList.remove('active'));
            document.getElementById('cpu-' + type).classList.add('active');
            event.target.classList.add('active');
        }

        // Memory 탭 전환
        function showMemTab(type) {
            document.querySelectorAll('#memory-perf .tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('#memory-perf .tab-btn').forEach(el => el.classList.remove('active'));
            document.getElementById('mem-' + type).classList.add('active');
            event.target.classList.add('active');
        }

        // System 탭 전환
        function showSysTab(type) {
            document.querySelectorAll('#system-perf .tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('#system-perf .tab-btn').forEach(el => el.classList.remove('active'));
            document.getElementById('sys-' + type).classList.add('active');
            event.target.classList.add('active');
        }

        // Price 탭 전환
        function showPriceTab(type) {
            document.querySelectorAll('#price-perf .tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('#price-perf .tab-btn').forEach(el => el.classList.remove('active'));
            document.getElementById('price-' + type).classList.add('active');
            event.target.classList.add('active');
        }

        // CPU Integer Chart
        const intSorted = [...data].sort((a, b) => b.int - a.int).slice(0, 20);
        new Chart(document.getElementById('cpuIntChart'), {
            type: 'bar',
            data: {
                labels: intSorted.map(d => d.instance),
                datasets: [{
                    label: 'Integer ops/s',
                    data: intSorted.map(d => d.int),
                    backgroundColor: intSorted.map(d => colors[d.arch]),
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { x: { beginAtZero: true, title: { display: true, text: 'bogo ops/s' } } }
            }
        });

        // CPU Float Chart
        const floatSorted = [...data].sort((a, b) => b.float - a.float).slice(0, 20);
        new Chart(document.getElementById('cpuFloatChart'), {
            type: 'bar',
            data: {
                labels: floatSorted.map(d => d.instance),
                datasets: [{
                    label: 'Float ops/s',
                    data: floatSorted.map(d => d.float),
                    backgroundColor: floatSorted.map(d => colors[d.arch]),
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { x: { beginAtZero: true, title: { display: true, text: 'bogo ops/s' } } }
            }
        });

        // Matrix Chart
        const matrixSorted = [...data].sort((a, b) => b.matrix - a.matrix).slice(0, 20);
        new Chart(document.getElementById('matrixChart'), {
            type: 'bar',
            data: {
                labels: matrixSorted.map(d => d.instance),
                datasets: [{
                    label: 'Matrix ops/s',
                    data: matrixSorted.map(d => d.matrix),
                    backgroundColor: matrixSorted.map(d => colors[d.arch]),
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { x: { beginAtZero: true, title: { display: true, text: 'bogo ops/s' } } }
            }
        });

        // Memcpy Chart
        const memcpySorted = [...data].sort((a, b) => b.memcpy - a.memcpy).slice(0, 20);
        new Chart(document.getElementById('memcpyChart'), {
            type: 'bar',
            data: {
                labels: memcpySorted.map(d => d.instance),
                datasets: [{
                    label: 'Memcpy ops/s',
                    data: memcpySorted.map(d => d.memcpy),
                    backgroundColor: memcpySorted.map(d => colors[d.arch]),
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { x: { beginAtZero: true, title: { display: true, text: 'ops/s' } } }
            }
        });

        // Cache Chart
        const cacheSorted = [...data].sort((a, b) => b.cache - a.cache).slice(0, 20);
        new Chart(document.getElementById('cacheChart'), {
            type: 'bar',
            data: {
                labels: cacheSorted.map(d => d.instance),
                datasets: [{
                    label: 'Cache ops/s',
                    data: cacheSorted.map(d => d.cache),
                    backgroundColor: cacheSorted.map(d => colors[d.arch]),
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { x: { beginAtZero: true, title: { display: true, text: 'ops/s' } } }
            }
        });

        // Context Switch Chart
        const switchSorted = [...data].sort((a, b) => b.switch - a.switch).slice(0, 20);
        new Chart(document.getElementById('switchChart'), {
            type: 'bar',
            data: {
                labels: switchSorted.map(d => d.instance),
                datasets: [{
                    label: 'Context Switch ops/s',
                    data: switchSorted.map(d => d.switch),
                    backgroundColor: switchSorted.map(d => colors[d.arch]),
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { x: { beginAtZero: true, title: { display: true, text: 'ops/s' } } }
            }
        });

        // Branch Chart
        const branchSorted = [...data].sort((a, b) => b.branch - a.branch).slice(0, 20);
        new Chart(document.getElementById('branchChart'), {
            type: 'bar',
            data: {
                labels: branchSorted.map(d => d.instance),
                datasets: [{
                    label: 'Branch ops/s',
                    data: branchSorted.map(d => d.branch),
                    backgroundColor: branchSorted.map(d => colors[d.arch]),
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { x: { beginAtZero: true, title: { display: true, text: 'ops/s' } } }
            }
        });

        // 가격 대비 성능 버블 차트
        new Chart(document.getElementById('pricePerfChart'), {
            type: 'bubble',
            data: {
                datasets: [
                    {
                        label: 'Graviton',
                        data: data.filter(d => d.arch === 'Graviton').map(d => ({
                            x: d.price,
                            y: d.total,
                            r: Math.sqrt(d.total) / 50,
                            instance: d.instance,
                            efficiency: d.efficiency
                        })),
                        backgroundColor: 'rgba(16, 185, 129, 0.6)',
                        borderColor: '#10b981'
                    },
                    {
                        label: 'Intel',
                        data: data.filter(d => d.arch === 'Intel').map(d => ({
                            x: d.price,
                            y: d.total,
                            r: Math.sqrt(d.total) / 50,
                            instance: d.instance,
                            efficiency: d.efficiency
                        })),
                        backgroundColor: 'rgba(59, 130, 246, 0.6)',
                        borderColor: '#3b82f6'
                    },
                    {
                        label: 'AMD',
                        data: data.filter(d => d.arch === 'AMD').map(d => ({
                            x: d.price,
                            y: d.total,
                            r: Math.sqrt(d.total) / 50,
                            instance: d.instance,
                            efficiency: d.efficiency
                        })),
                        backgroundColor: 'rgba(239, 68, 68, 0.6)',
                        borderColor: '#ef4444'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top' },
                    tooltip: {
                        callbacks: {
                            label: function(ctx) {
                                const d = ctx.raw;
                                return `${d.instance}: $${d.x}/hr, 점수: ${d.y.toLocaleString()}, 가성비: ${d.efficiency.toLocaleString()} 점/$`;
                            }
                        }
                    }
                },
                scales: {
                    x: { title: { display: true, text: '시간당 비용 ($/hr)' } },
                    y: { title: { display: true, text: '종합 점수' }, beginAtZero: false }
                }
            }
        });

        // 가성비 순위 차트
        const effSorted = [...data].sort((a, b) => b.efficiency - a.efficiency).slice(0, 20);
        new Chart(document.getElementById('efficiencyChart'), {
            type: 'bar',
            data: {
                labels: effSorted.map(d => d.instance),
                datasets: [{
                    label: '가성비 (점수/$)',
                    data: effSorted.map(d => d.efficiency),
                    backgroundColor: effSorted.map(d => colors[d.arch]),
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { x: { beginAtZero: true, title: { display: true, text: '점수/$ (높을수록 좋음)' } } }
            }
        });

        // CPU별 가성비 차트
        const intEffSorted = [...data].sort((a, b) => b.intEff - a.intEff).slice(0, 10);
        new Chart(document.getElementById('intEffChart'), {
            type: 'bar',
            data: {
                labels: intEffSorted.map(d => d.instance.replace('.xlarge', '')),
                datasets: [{
                    label: 'Int 가성비',
                    data: intEffSorted.map(d => d.intEff),
                    backgroundColor: intEffSorted.map(d => colors[d.arch]),
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false }, title: { display: true, text: 'Integer 가성비' } },
                scales: { x: { beginAtZero: true } }
            }
        });

        const floatEffSorted = [...data].sort((a, b) => b.floatEff - a.floatEff).slice(0, 10);
        new Chart(document.getElementById('floatEffChart'), {
            type: 'bar',
            data: {
                labels: floatEffSorted.map(d => d.instance.replace('.xlarge', '')),
                datasets: [{
                    label: 'Float 가성비',
                    data: floatEffSorted.map(d => d.floatEff),
                    backgroundColor: floatEffSorted.map(d => colors[d.arch]),
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false }, title: { display: true, text: 'Float 가성비' } },
                scales: { x: { beginAtZero: true } }
            }
        });

        const matrixEffSorted = [...data].sort((a, b) => b.matrixEff - a.matrixEff).slice(0, 10);
        new Chart(document.getElementById('matrixEffChart'), {
            type: 'bar',
            data: {
                labels: matrixEffSorted.map(d => d.instance.replace('.xlarge', '')),
                datasets: [{
                    label: 'Matrix 가성비',
                    data: matrixEffSorted.map(d => d.matrixEff),
                    backgroundColor: matrixEffSorted.map(d => colors[d.arch]),
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false }, title: { display: true, text: 'Matrix 가성비' } },
                scales: { x: { beginAtZero: true } }
            }
        });

        // 아키텍처 + 세대별 비교 차트
        function calcArchGenAvg(arch, gen, key) {
            const filtered = data.filter(d => d.arch === arch && d.gen === gen);
            return filtered.length ? Math.round(filtered.reduce((sum, d) => sum + d[key], 0) / filtered.length) : null;
        }

        const archColors = {
            'Graviton': '#10b981',
            'Intel': '#3b82f6',
            'AMD': '#ef4444'
        };
        const generations = [5, 6, 7, 8];
        const architectures = ['Graviton', 'Intel', 'AMD'];

        // 메트릭 설정 (색상, 스케일링 등)
        const metricConfig = {
            matrix: { label: 'Matrix', divisor: 1000, unit: 'K ops/s', solidColors: ['#3b82f6', '#ef4444', '#10b981'] },
            float: { label: 'Float', divisor: 1000, unit: 'K ops/s', solidColors: ['#8b5cf6', '#a855f7', '#7c3aed'] },
            int: { label: 'CPU Int', divisor: 1000, unit: 'K ops/s', solidColors: ['#06b6d4', '#0891b2', '#0e7490'] },
            memcpy: { label: 'Memory', divisor: 100, unit: '×100 MiB/s', lightColors: ['#93c5fd', '#fca5a5', '#6ee7b7'] },
            cache: { label: 'Cache', divisor: 1, unit: 'ops/s', lightColors: ['#f9a8d4', '#f472b6', '#ec4899'] },
            switch: { label: 'Ctx Switch', divisor: 100000, unit: '×100K ops/s', lightColors: ['#5eead4', '#2dd4bf', '#14b8a6'] },
            branch: { label: 'Branch', divisor: 1000, unit: 'K ops/s', lightColors: ['#94a3b8', '#64748b', '#475569'] }
        };

        // 아키텍처별 세대별 통합 차트 (동적 업데이트)
        let combinedChart = new Chart(document.getElementById('archGenCombinedChart'), {
            type: 'bar',
            data: {
                labels: ['5세대', '6세대', '7세대', '8세대'],
                datasets: []
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: { usePointStyle: false, boxWidth: 20, font: { size: 11 } }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                if (context.raw === null) return null;
                                return context.dataset.label + ': ' + context.raw.toLocaleString();
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'Score (normalized)' }
                    }
                }
            }
        });

        function updateCombinedChart() {
            const checkboxes = document.querySelectorAll('.metric-chk:checked');
            const selected = Array.from(checkboxes).map(cb => cb.value);

            // 최대 2개로 제한
            if (selected.length > 2) {
                const lastChecked = event.target;
                lastChecked.checked = false;
                return;
            }

            const datasets = [];
            const archList = ['Intel', 'AMD', 'Graviton'];
            const archSolidColors = { Intel: '#3b82f6', AMD: '#ef4444', Graviton: '#10b981' };
            const archLightColors = { Intel: '#93c5fd', AMD: '#fca5a5', Graviton: '#6ee7b7' };

            selected.forEach((metric, idx) => {
                const cfg = metricConfig[metric];
                const isSecondary = idx === 1;

                archList.forEach(arch => {
                    datasets.push({
                        label: `${arch} ${cfg.label}`,
                        data: generations.map(g => {
                            if (arch === 'AMD' && g !== 5) return null;
                            if (arch === 'Graviton' && g < 6) return null;
                            const v = calcArchGenAvg(arch, g, metric);
                            return v ? Math.round(v / cfg.divisor) : null;
                        }),
                        backgroundColor: isSecondary ? archLightColors[arch] : archSolidColors[arch],
                        borderColor: archSolidColors[arch],
                        borderWidth: isSecondary ? 2 : 1,
                        borderDash: isSecondary ? [5, 5] : []
                    });
                });
            });

            combinedChart.data.datasets = datasets;
            combinedChart.options.scales.y.title.text = selected.map(m => metricConfig[m].unit).join(' / ');
            combinedChart.update();
        }

        // 초기 렌더링
        updateCombinedChart();

        let archGenChart = new Chart(document.getElementById('archChart'), {
            type: 'bar',
            data: {
                labels: ['5세대', '6세대', '7세대', '8세대'],
                datasets: architectures.map(arch => ({
                    label: arch,
                    data: generations.map(gen => {
                        const val = calcArchGenAvg(arch, gen, 'matrix');
                        return val ? Math.round(val / 1000) : null;
                    }),
                    backgroundColor: archColors[arch],
                    borderColor: archColors[arch],
                    borderWidth: 1
                }))
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top' },
                    title: { display: true, text: 'Matrix 성능 (K ops/sec) - 세대별 아키텍처 비교', font: { size: 14 } }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'K ops/sec' }
                    }
                }
            }
        });

        function updateArchGenChart() {
            const metric = document.getElementById('metricSelector').value;
            const metricLabels = {
                'matrix': { title: 'Matrix 성능', unit: 'K ops/s', divisor: 1000 },
                'float': { title: 'Float 성능', unit: 'K ops/s', divisor: 1000 },
                'int': { title: 'CPU Int 성능', unit: 'K ops/s', divisor: 1000 },
                'memcpy': { title: 'Memory 성능', unit: 'MiB/s', divisor: 1 },
                'cache': { title: 'Cache 성능', unit: 'ops/s', divisor: 1 },
                'switch': { title: 'Context Switch 성능', unit: '100K ops/s', divisor: 100000 },
                'branch': { title: 'Branch Prediction 성능', unit: 'K ops/s', divisor: 1000 }
            };
            const config = metricLabels[metric];

            archGenChart.data.datasets = architectures.map(arch => ({
                label: arch,
                data: generations.map(gen => {
                    const val = calcArchGenAvg(arch, gen, metric);
                    return val ? Math.round(val / config.divisor) : null;
                }),
                backgroundColor: archColors[arch],
                borderColor: archColors[arch],
                borderWidth: 1
            }));
            archGenChart.options.plugins.title.text = config.title + ' - 세대별 아키텍처 비교';
            archGenChart.options.scales.y.title.text = config.unit;
            archGenChart.update();
        }

        // 세대별 성능 추이 (아키텍처별)
        const archGenData = {};
        data.forEach(d => {
            if (!archGenData[d.arch]) archGenData[d.arch] = {};
            if (!archGenData[d.arch][d.gen]) archGenData[d.arch][d.gen] = [];
            archGenData[d.arch][d.gen].push(d.total);
        });

        const archs = ['Graviton', 'Intel', 'AMD'];
        const gensForChart = [5, 6, 7, 8];
        const archGenAvgs = archs.map(arch => gensForChart.map(g => {
            const vals = archGenData[arch]?.[g] || [];
            return vals.length ? Math.round(vals.reduce((a,b) => a+b, 0) / vals.length) : null;
        }));

        new Chart(document.getElementById('genChart'), {
            type: 'line',
            data: {
                labels: ['5세대', '6세대', '7세대', '8세대'],
                datasets: [
                    { label: 'Graviton', data: archGenAvgs[0], borderColor: '#10b981', backgroundColor: '#10b98133', tension: 0.1, spanGaps: true, pointRadius: 6, pointHoverRadius: 8 },
                    { label: 'Intel', data: archGenAvgs[1], borderColor: '#3b82f6', backgroundColor: '#3b82f633', tension: 0.1, spanGaps: true, pointRadius: 6, pointHoverRadius: 8 },
                    { label: 'AMD', data: archGenAvgs[2], borderColor: '#ef4444', backgroundColor: '#ef444433', tension: 0.1, spanGaps: true, pointRadius: 6, pointHoverRadius: 8 }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top' },
                    title: { display: true, text: '종합 점수 세대별 추이', font: { size: 14 } }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        title: { display: true, text: '종합 점수' }
                    }
                }
            }
        });

        // 가성비 Top 20 차트
        const costEffTop20 = [...data].sort((a, b) => b.efficiency - a.efficiency).slice(0, 20);
        new Chart(document.getElementById('costEffTop20Chart'), {
            type: 'bar',
            data: {
                labels: costEffTop20.map(d => d.instance),
                datasets: [{
                    label: '가성비 (점수/$)',
                    data: costEffTop20.map(d => d.efficiency),
                    backgroundColor: costEffTop20.map(d => archColors[d.arch]),
                    borderColor: costEffTop20.map(d => archColors[d.arch]),
                    borderWidth: 1,
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    title: { display: true, text: '종합 점수 / 시간당 비용 (높을수록 좋음)', font: { size: 14 } },
                    tooltip: {
                        callbacks: {
                            afterLabel: function(ctx) {
                                const d = costEffTop20[ctx.dataIndex];
                                return `$${d.price}/hr | 종합: ${d.total.toLocaleString()}`;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        beginAtZero: true,
                        title: { display: true, text: '점수/$ (높을수록 좋음)' }
                    }
                }
            }
        });

        // 테이블 렌더링
        function renderTable(filteredData) {
            const tbody = document.getElementById('resultsBody');
            tbody.innerHTML = '';
            filteredData.forEach((d, i) => {
                const archClass = d.arch === 'Graviton' ? 'badge-graviton' : d.arch === 'Intel' ? 'badge-intel' : 'badge-amd';
                tbody.innerHTML += `
                    <tr data-arch="${d.arch}" data-gen="${d.gen}">
                        <td>${i + 1}</td>
                        <td><strong>${d.instance}</strong></td>
                        <td><span class="badge ${archClass}">${d.arch.substring(0,3)}</span></td>
                        <td>${d.gen}</td>
                        <td>$${d.price.toFixed(3)}</td>
                        <td>${d.matrix.toLocaleString()}</td>
                        <td>${d.float.toLocaleString()}</td>
                        <td>${d.int.toLocaleString()}</td>
                        <td>${d.memcpy.toLocaleString()}</td>
                        <td>${(d.switch/1000).toFixed(0)}K</td>
                        <td><strong>${d.total.toLocaleString()}</strong></td>
                        <td>${d.efficiency.toLocaleString()}</td>
                    </tr>
                `;
            });
        }

        // 초기 렌더링
        renderTable(data);

        // 필터링
        function filterTable() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const arch = document.getElementById('archFilter').value;
            const gen = document.getElementById('genFilter').value;

            let filtered = data;
            if (search) filtered = filtered.filter(d => d.instance.toLowerCase().includes(search));
            if (arch) filtered = filtered.filter(d => d.arch === arch);
            if (gen) filtered = filtered.filter(d => d.gen === parseInt(gen));

            renderTable(filtered);
        }

        // 정렬
        let sortDir = {};
        function sortTable(col) {
            const keys = ['', 'instance', 'arch', 'gen', 'price', 'matrix', 'float', 'int', 'memcpy', 'switch', 'total', 'efficiency'];
            const key = keys[col];
            if (!key) return;

            sortDir[col] = !sortDir[col];
            const sorted = [...data].sort((a, b) => {
                if (typeof a[key] === 'string') return sortDir[col] ? a[key].localeCompare(b[key]) : b[key].localeCompare(a[key]);
                return sortDir[col] ? a[key] - b[key] : b[key] - a[key];
            });
            renderTable(sorted);
        }
    </script>
</body>
</html>
